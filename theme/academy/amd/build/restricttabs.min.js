define("theme_academy/restricttabs",["exports","core/modal_factory","core/modal_events","core/ajax","core/config","core/str","core/notification","jquery"],(function(_exports,_modal_factory,_modal_events,_ajax,_config,_str,_notification,_jquery){function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.init=void 0,_modal_factory=_interopRequireDefault(_modal_factory),_modal_events=_interopRequireDefault(_modal_events),_ajax=_interopRequireDefault(_ajax),_config=_interopRequireDefault(_config),_notification=_interopRequireDefault(_notification),_jquery=_interopRequireDefault(_jquery);const Selectors_actions={courseSettings:'[data-key="editsettings"]',coursereuse:'[data-key="coursereuse"]',SECTIONACTIONMENU:'[class="section_action_menu ml-auto"]',ModuleActionOptions:'[class="cm_action_menu actions"]',addSection:'[data-action="addSection"]',hide:'[data-action="hide"]',deleteSection:'[data-action="deleteSection"]',showmodules:'[data-action="show"]',assignrolesonmoduleoption:'[data-action="assignroles"]',approve:'[data-action="approve"]',reject:'[data-action="reject"]'};_exports.init=()=>{const body=document.getElementsByTagName("body"),settings=document.querySelector(Selectors_actions.courseSettings),coursereuse=document.querySelector(Selectors_actions.coursereuse),addSection=(document.querySelectorAll(Selectors_actions.SECTIONACTIONMENU),document.querySelectorAll(Selectors_actions.ModuleActionOptions),document.querySelector(Selectors_actions.addSection)),hide=document.querySelectorAll(Selectors_actions.hide),deleteSection=document.querySelectorAll(Selectors_actions.deleteSection),showmodules=document.querySelectorAll(Selectors_actions.showmodules),assignrolesonmoduleoption=document.querySelectorAll(Selectors_actions.assignrolesonmoduleoption);function hide_edit_option(){(0,_jquery.default)(".fa-pencil").css("display","none");for(var editoptions=document.querySelectorAll(".fa-pencil"),i=0;i<editoptions.length;i++)editoptions[i].remove();void 0!==settings&&settings.remove(),void 0!==coursereuse&&coursereuse.remove();for(i=0;i<hide.length;i++)hide[i].remove();for(i=0;i<deleteSection.length;i++)deleteSection[i].remove();for(i=0;i<showmodules.length;i++)showmodules[i].remove();for(i=0;i<assignrolesonmoduleoption.length;i++)assignrolesonmoduleoption[i].remove()}var idarr=body[0].id.split("-");if("page-course-view"==idarr[0]+"-"+idarr[1]+"-"+idarr[2]){"editingtrainer"==document.querySelector(".user_role").getAttribute("data-role")&&hide_edit_option()}function approve_or_reject_activity(params){var confrmstring;"approve"==params.status?confrmstring=(0,_str.get_string)("confirmapprove","local_trainingprogram"):"reject"==params.status&&(confrmstring=(0,_str.get_string)("confirmreject","local_trainingprogram")),confrmstring&&_modal_factory.default.create({title:(0,_str.get_string)("confirm","local_trainingprogram"),type:_modal_factory.default.types.SAVE_CANCEL,body:confrmstring}).done(function(modal){this.modal=modal,modal.setSaveButtonText((0,_str.get_string)("yes")),modal.getRoot().on(_modal_events.default.save,function(e){promise=_ajax.default.call([{methodname:"local_trainingprogram_activity_approoved",args:params}]),promise[0].done((function(resp){if(1==resp.status)window.location.reload();else{var error=(0,_str.get_string)("error"),message=(0,_str.get_string)("approvefailed","local_trainingprogram"),ok=(0,_str.get_string)("ok");_notification.default.alert(error,message,ok)}})).fail((function(exception){console.log(exception)}))}.bind(this)),modal.show()}.bind(this))}document.addEventListener("click",(function(e){if(addSection){"editingtrainer"==document.querySelector(".user_role").getAttribute("data-role")&&setInterval(hide_edit_option(),1e3)}var params={};const approve=e.target.closest(Selectors_actions.approve),reject=e.target.closest(Selectors_actions.reject);if(approve){let cmid=approve.getAttribute("data-id"),status=approve.getAttribute("data-action");params.cmid=cmid,params.status=status,approve_or_reject_activity(params)}if(reject){let cmid=reject.getAttribute("data-id"),status=reject.getAttribute("data-action");params.cmid=cmid,params.status=status,approve_or_reject_activity(params)}}))}}));

//# sourceMappingURL=restricttabs.min.js.map