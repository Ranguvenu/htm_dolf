define("block_documentupload/documentupload",["exports","local_trainingprogram/dynamicform","core_form/dynamicform","core/str","core/modal_factory","core/ajax","core_form/modalform","core/modal_events","core/templates"],(function(_exports,_dynamicform,_dynamicform2,_str,_modal_factory,_ajax,_modalform,_modal_events,_templates){function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.init=void 0,_dynamicform=_interopRequireDefault(_dynamicform),_dynamicform2=_interopRequireDefault(_dynamicform2),_modal_factory=_interopRequireDefault(_modal_factory),_ajax=_interopRequireDefault(_ajax),_modalform=_interopRequireDefault(_modalform),_modal_events=_interopRequireDefault(_modal_events),_templates=_interopRequireDefault(_templates);const Selectors_actions={createdocumentupload:'[data-action="createdocumentupload"]',deletedocumentupload:'[data-action="deletedocumentupload"]',viewdocumentupload:'[data-action="viewdocumentupload"]'};_exports.init=()=>{document.addEventListener("click",(function(e){e.stopImmediatePropagation();let element=e.target.closest(Selectors_actions.createdocumentupload);if(element){e.preventDefault();const title=element.getAttribute("data-id")?(0,_str.get_string)("editdocumentupload","block_documentupload",element.getAttribute("data-name")):(0,_str.get_string)("createdocumentupload","block_documentupload"),form=new _dynamicform.default({formClass:"block_documentupload\\documentuploadform",args:{id:element.getAttribute("data-id")},modalConfig:{title:title},returnFocus:element});form.addEventListener(form.events.FORM_SUBMITTED,(()=>window.location.reload())),form.show()}let deletedocumentupload=e.target.closest(Selectors_actions.deletedocumentupload);if(deletedocumentupload){const id=deletedocumentupload.getAttribute("data-id");_modal_factory.default.create({title:(0,_str.get_string)("deletedocumentupload","block_documentupload"),type:_modal_factory.default.types.SAVE_CANCEL,body:(0,_str.get_string)("deletedocumentuploadconfirm","block_documentupload")}).done(function(modal){this.modal=modal,modal.setSaveButtonText((0,_str.get_string)("delete","block_documentupload")),modal.getRoot().on(_modal_events.default.save,function(e){e.preventDefault();var params={};params.id=id,_ajax.default.call([{methodname:"block_delete_documentupload",args:params}])[0].done((function(resp){window.location.reload(!0)})).fail((function(){console.log("exception")}))}.bind(this)),modal.show()}.bind(this))}let viewdocumentupload=e.target.closest(Selectors_actions.viewdocumentupload);if(viewdocumentupload){const id=viewdocumentupload.getAttribute("data-id");var params={};params.id=id,_ajax.default.call([{methodname:"block_documentupload_info",args:params}])[0].done((function(resp){JSON.stringify(resp);_modal_factory.default.create({title:(0,_str.get_string)("viewdocumentupload","block_documentupload"),body:resp.options}).done(function(modal){this.modal=modal,this.modal.setLarge(),modal.show()}.bind(this))})).fail((function(){console.log("exception")}))}}))}}));

//# sourceMappingURL=documentupload.min.js.map