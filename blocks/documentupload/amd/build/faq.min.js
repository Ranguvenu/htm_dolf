define("block_faq/faq",["exports","local_trainingprogram/dynamicform","core_form/dynamicform","core/str","core/modal_factory","core/ajax","core_form/modalform","core/modal_events","core/templates"],(function(_exports,_dynamicform,_dynamicform2,_str,_modal_factory,_ajax,_modalform,_modal_events,_templates){function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.init=void 0,_dynamicform=_interopRequireDefault(_dynamicform),_dynamicform2=_interopRequireDefault(_dynamicform2),_modal_factory=_interopRequireDefault(_modal_factory),_ajax=_interopRequireDefault(_ajax),_modalform=_interopRequireDefault(_modalform),_modal_events=_interopRequireDefault(_modal_events),_templates=_interopRequireDefault(_templates);const Selectors_actions={createfaq:'[data-action="createfaq"]',deletefaq:'[data-action="deletefaq"]',viewfaq:'[data-action="viewfaq"]'};_exports.init=()=>{document.addEventListener("click",(function(e){e.stopImmediatePropagation();let element=e.target.closest(Selectors_actions.createfaq);if(element){e.preventDefault();const title=element.getAttribute("data-id")?(0,_str.get_string)("editfaq","block_faq",element.getAttribute("data-name")):(0,_str.get_string)("createfaq","block_faq"),form=new _dynamicform.default({formClass:"block_faq\\faqform",args:{id:element.getAttribute("data-id")},modalConfig:{title:title},returnFocus:element});form.addEventListener(form.events.FORM_SUBMITTED,(()=>window.location.reload())),form.show()}let deletefaq=e.target.closest(Selectors_actions.deletefaq);if(deletefaq){const id=deletefaq.getAttribute("data-id");_modal_factory.default.create({title:(0,_str.get_string)("deletefaq","block_faq"),type:_modal_factory.default.types.SAVE_CANCEL,body:(0,_str.get_string)("deletefaqconfirm","block_faq")}).done(function(modal){this.modal=modal,modal.setSaveButtonText((0,_str.get_string)("delete","block_faq")),modal.getRoot().on(_modal_events.default.save,function(e){e.preventDefault();var params={};params.id=id,_ajax.default.call([{methodname:"block_delete_faq",args:params}])[0].done((function(resp){window.location.reload(!0)})).fail((function(){console.log("exception")}))}.bind(this)),modal.show()}.bind(this))}let viewfaq=e.target.closest(Selectors_actions.viewfaq);if(viewfaq){const id=viewfaq.getAttribute("data-id");var params={};params.id=id,_ajax.default.call([{methodname:"block_faq_info",args:params}])[0].done((function(resp){JSON.stringify(resp);_modal_factory.default.create({title:(0,_str.get_string)("viewfaq","block_faq"),body:resp.options}).done(function(modal){this.modal=modal,this.modal.setLarge(),modal.show()}.bind(this))})).fail((function(){console.log("exception")}))}}))}}));

//# sourceMappingURL=faq.min.js.map