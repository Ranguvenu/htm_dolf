{"version":3,"file":"assignexperts.min.js","sources":["../src/assignexperts.js"],"sourcesContent":["\n/**\n * @module     local_questionbank\n * @copyright  Moodle India\n * @author \t   Ikram Ahmad (ikram.ahmad@moodle.com)\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\nimport Ajax from 'core/ajax';\nimport cfg from 'core/config';\nimport {get_string as getString} from 'core/str';\nimport $ from 'jquery';\nimport Notification from 'core/notification';\n\n\nconst Selectors = {\n    actions: {\n        addOrRemoveexpert: '[role=\"option\"]',\n        fdescription : '[class=\"fdescription\"]',\n        \n    },\n};\nexport const removeexpert = () => {\n\tdocument.addEventListener(\"click\", function(e){\n\t\tvar isExpertForm = document.getElementsByName('_qf__local_questionbank_form_expertsform');\n\t    if (isExpertForm.length > 0) {\n\t        // console.log(isExpertForm);\n\t\t\tlet tagName = e.target.tagName;\n\t\t\tlet is_removed = e.target.closest(Selectors.actions.addOrRemoveexpert);\n\t\t\tif (tagName == 'SPAN') {\n\t\t\t\tif (is_removed != null) {\n\t\t\t\t\tlet removed_expert = is_removed.getAttribute('data-value');\n\t\t\t\t\t$('.noofquestionsfor_'+removed_expert).remove();\n\t\t\t\t}\n\t\t\t}else{\n\t\t\t\tif (tagName == 'LI') {\n\t\t\t\t\tvar savebtn = document.querySelector('div.modal-footer>button[data-action=\"save\"]');\n\t\t\t\t\tsavebtn.disabled = true;\n\t\t\t\t\tconst fdescription = document.querySelector('.fdescription');\n\t\t\t\t\tlet selectExpert = e.target.closest(Selectors.actions.addOrRemoveexpert);\n\t\t\t\t\tif (selectExpert) {\n\t\t\t\t\t\tlet seleceted_expertid = selectExpert.getAttribute('data-value');\n\t\t\t\t\t\tif (seleceted_expertid) {\n\t\t\t\t\t\t\t$.ajax({\n\t\t\t\t\t\t\t\turl: cfg.wwwroot+'/local/questionbank/process.php',\n\t\t\t\t\t\t    \tdata: {expert_id: seleceted_expertid},\n\t\t\t\t\t\t    \ttype:\"POST\",\n\t\t\t\t\t\t    \tsuccess: function (names) {\n\t\t\t\t\t\t    \t\tlet element = JSON.parse(names);\n\t\t\t\t\t\t    \t\t$('.fdescription').remove();\n\t\t\t\t\t\t    \t\t$('.mform').append(element.allowedquestionfields);\n\t\t\t\t\t\t    \t\t$('.mform').append(fdescription);\n\t\t\t\t\t\t    \t}\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t    }\n\t});\n}\nexport const checkvalue = (element) => {\n\tvar sum = parseInt(element.value);\n\tvar err = getString('error');\n\tconsole.log(sum);\n\tvar savebtn = document.querySelector('div.modal-footer>button[data-action=\"save\"]');\n\tif (isNaN(sum)) {\n\t\telement.classList.add(\"is-invalid\");\n\t    Notification.alert(err, getString('questionnum_cannotbenull', 'local_questionbank'), getString('ok'));\n\t    savebtn.disabled = true;\n\t}else if (sum < 0) {\n\t    Notification.alert(err, getString('questionnum_cannotbenegatve', 'local_questionbank'), getString('ok'));\n\t    savebtn.disabled = true;\n\t}\n\telse{\n\t\telement.classList.remove(\"is-invalid\");\n\t    savebtn.disabled = false;\n\t}\n}"],"names":["Selectors","addOrRemoveexpert","fdescription","document","addEventListener","e","getElementsByName","length","tagName","target","is_removed","closest","removed_expert","getAttribute","remove","querySelector","disabled","selectExpert","seleceted_expertid","ajax","url","cfg","wwwroot","data","expert_id","type","success","names","element","JSON","parse","append","allowedquestionfields","sum","parseInt","value","err","console","log","savebtn","isNaN","classList","add","alert"],"mappings":";;;;;;4RAcMA,kBACO,CACLC,kBAAmB,kBACnBC,aAAe,gDAIK,KAC3BC,SAASC,iBAAiB,SAAS,SAASC,MACxBF,SAASG,kBAAkB,4CAC1BC,OAAS,EAAG,KAE3BC,QAAUH,EAAEI,OAAOD,QACnBE,WAAaL,EAAEI,OAAOE,QAAQX,kBAAkBC,sBACrC,QAAXO,YACe,MAAdE,WAAoB,KACnBE,eAAiBF,WAAWG,aAAa,kCAC3C,qBAAqBD,gBAAgBE,kBAGzB,MAAXN,QAAiB,CACNL,SAASY,cAAc,+CAC7BC,UAAW,QACbd,aAAeC,SAASY,cAAc,qBACxCE,aAAeZ,EAAEI,OAAOE,QAAQX,kBAAkBC,sBAClDgB,aAAc,KACbC,mBAAqBD,aAAaJ,aAAa,cAC/CK,oCACDC,KAAK,CACNC,IAAKC,gBAAIC,QAAQ,kCACdC,KAAM,CAACC,UAAWN,oBAClBO,KAAK,OACLC,QAAS,SAAUC,WACdC,QAAUC,KAAKC,MAAMH,2BACvB,iBAAiBb,6BACjB,UAAUiB,OAAOH,QAAQI,2CACzB,UAAUD,OAAO7B,4CAUJ0B,cACtBK,IAAMC,SAASN,QAAQO,OACvBC,KAAM,mBAAU,SACpBC,QAAQC,IAAIL,SACRM,QAAUpC,SAASY,cAAc,+CACjCyB,MAAMP,MACTL,QAAQa,UAAUC,IAAI,oCACNC,MAAMP,KAAK,mBAAU,2BAA4B,uBAAuB,mBAAU,OAC/FG,QAAQvB,UAAW,GACbiB,IAAM,yBACCU,MAAMP,KAAK,mBAAU,8BAA+B,uBAAuB,mBAAU,OAClGG,QAAQvB,UAAW,IAGtBY,QAAQa,UAAU3B,OAAO,cACtByB,QAAQvB,UAAW"}