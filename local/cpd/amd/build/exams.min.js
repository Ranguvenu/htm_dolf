define("local_cpd/exams",["exports","core_form/modalform","core/modal_factory","core/modal_events","core/ajax","core/str"],(function(_exports,_modalform,_modal_factory,_modal_events,_ajax,_str){function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.init=void 0,_modalform=_interopRequireDefault(_modalform),_modal_factory=_interopRequireDefault(_modal_factory),_modal_events=_interopRequireDefault(_modal_events),_ajax=_interopRequireDefault(_ajax);var Selectors_actions={createexam:'[data-action="createexam"]',deleteexam:'[data-action="deleteexam"]'};_exports.init=function(){document.addEventListener("click",(function(e){e.stopImmediatePropagation();var element=e.target.closest(Selectors_actions.createexam);if(element){e.preventDefault();var title=element.getAttribute("data-id")?(0,_str.get_string)("editexam","local_exams",element.getAttribute("data-name")):(0,_str.get_string)("createexam","local_exams"),form=new _modalform.default({formClass:"local_exams\\form\\examsform",args:{id:element.getAttribute("data-id")},modalConfig:{title:title},returnFocus:element});form.addEventListener(form.events.FORM_SUBMITTED,(function(){return window.location.reload()})),form.show()}var deleteexam=e.target.closest(Selectors_actions.deleteexam);if(deleteexam){var examid=deleteexam.getAttribute("data-id");_modal_factory.default.create({title:(0,_str.get_string)("deleteexam","local_exams"),type:_modal_factory.default.types.SAVE_CANCEL,body:(0,_str.get_string)("deleteallconfirm","local_exams")}).done(function(modal){this.modal=modal,modal.setSaveButtonText((0,_str.get_string)("delete","local_exams")),modal.getRoot().on(_modal_events.default.save,function(e){e.preventDefault();var params={};params.examid=examid,_ajax.default.call([{methodname:"local_deleteexam",args:params}])[0].done((function(){window.location.reload(!0)})).fail((function(){}))}.bind(this)),modal.show()}.bind(this))}}))}}));

//# sourceMappingURL=exams.min.js.map