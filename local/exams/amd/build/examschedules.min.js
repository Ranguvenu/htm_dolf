define("local_exams/examschedules",["exports","core_form/modalform","core/modal_factory","core/modal_events","core/ajax","core/templates","core/str","jquery"],(function(_exports,_modalform,_modal_factory,_modal_events,_ajax,_templates,_str,_jquery){function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.init=void 0,_modalform=_interopRequireDefault(_modalform),_modal_factory=_interopRequireDefault(_modal_factory),_modal_events=_interopRequireDefault(_modal_events),_ajax=_interopRequireDefault(_ajax),_templates=_interopRequireDefault(_templates),_jquery=_interopRequireDefault(_jquery);const Selectors_actions={examschedules:'[data-action="examschedules"]',editschedule:'[data-action="editschedule"]',deleteschedule:'[data-action="deleteschedule"]'};_exports.init=()=>{document.addEventListener("click",(function(e){e.stopImmediatePropagation();let examschedules=e.target.closest(Selectors_actions.examschedules);if(examschedules){e.preventDefault();const title=(0,_str.get_string)("createhallschedule","local_hall"),form=new _modalform.default({formClass:"local_hall\\form\\schedulehallform",args:{entityid:examschedules.getAttribute("data-examid"),entity:"exam"},modalConfig:{title:title},returnFocus:examschedules});form.addEventListener(form.events.FORM_SUBMITTED,(()=>window.location.reload())),form.show()}let editschedule=e.target.closest(Selectors_actions.editschedule);if(editschedule){e.preventDefault();const title=(0,_str.get_string)("updateschedule","local_exams"),form=new _modalform.default({formClass:"local_hall\\form\\schedulehallform",args:{id:editschedule.getAttribute("data-id"),entity:"exam"},modalConfig:{title:title},returnFocus:editschedule});form.addEventListener(form.events.FORM_SUBMITTED,(()=>window.location.reload())),form.show()}let deleteschedule=e.target.closest(Selectors_actions.deleteschedule);if(deleteschedule){e.preventDefault();let scheduleid=deleteschedule.getAttribute("data-id");_modal_factory.default.create({title:(0,_str.get_string)("deleteexam","local_exams"),type:_modal_factory.default.types.SAVE_CANCEL,body:(0,_str.get_string)("scheduledeleteconfirm","local_exams")}).done(function(modal){this.modal=modal,modal.setSaveButtonText((0,_str.get_string)("delete","local_exams")),modal.getRoot().on(_modal_events.default.save,function(e){e.preventDefault();var params={};params.scheduleid=scheduleid,_ajax.default.call([{methodname:"local_exam_delete_schedule",args:params}])[0].done((function(resp){window.location.reload()})).fail((function(){console.log("exception")}))}.bind(this)),modal.show()}.bind(this))}}))}}));

//# sourceMappingURL=examschedules.min.js.map