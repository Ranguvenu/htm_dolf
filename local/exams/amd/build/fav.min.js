define("local_exams/fav",["exports","core/str","core/modal_factory","core/ajax","core_form/modalform","core/modal_events","core/templates","theme_academy/homepage"],(function(_exports,_str,_modal_factory,_ajax,_modalform,_modal_events,_templates,_homepage){function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.init=void 0,_modal_factory=_interopRequireDefault(_modal_factory),_ajax=_interopRequireDefault(_ajax),_modalform=_interopRequireDefault(_modalform),_modal_events=_interopRequireDefault(_modal_events),_templates=_interopRequireDefault(_templates),_homepage=_interopRequireDefault(_homepage);const Selectors_actions={removefavourites:'[data-action="removefavourites"]',addtofavourites:'[data-action="addtofavourites"]'};let HomePage=new _homepage.default;_exports.init=()=>{document.addEventListener("click",(function(e){let removefavourites=e.target.closest(Selectors_actions.removefavourites);if(removefavourites){e.preventDefault();removefavourites.getAttribute("data-action");const userid=removefavourites.getAttribute("data-userid"),itemtype=removefavourites.getAttribute("data-itemtype"),itemid=removefavourites.getAttribute("data-itemid"),component=removefavourites.getAttribute("data-component"),courseid=removefavourites.getAttribute("data-courseid");_modal_factory.default.create({title:(0,_str.get_string)("remfavconfirm","local_exams"),type:_modal_factory.default.types.SAVE_CANCEL,body:(0,_str.get_string)("remfavconfirmheader","local_exams",name)}).done(function(modal){this.modal=modal,modal.setSaveButtonText((0,_str.get_string)("yesremove","local_exams")),modal.getRoot().on(_modal_events.default.save,function(e){e.preventDefault();var params={};params.userid=userid,params.itemtype=itemtype,params.itemid=itemid,params.component=component,params.courseid=courseid;params.component;_ajax.default.call([{methodname:"local_exams_removefavourites",args:params}])[0].done((function(resp){$(".removeshow"+itemid).hide(),$(".removehide"+itemid).hide(),$(".addhide"+itemid).show(),$(".addshow"+itemid).show(),modal.destroy(),HomePage.confirmbox((0,_str.get_string)("removefavsuccess","local_exams"))})).fail((function(){console.log("exception")}))}.bind(this)),modal.show()}.bind(this))}let addtofavourites=e.target.closest(Selectors_actions.addtofavourites);if(addtofavourites){e.preventDefault();addtofavourites.getAttribute("data-action");const userid=addtofavourites.getAttribute("data-userid"),itemtype=addtofavourites.getAttribute("data-itemtype"),itemid=addtofavourites.getAttribute("data-itemid"),component=addtofavourites.getAttribute("data-component"),courseid=addtofavourites.getAttribute("data-courseid");_modal_factory.default.create({title:(0,_str.get_string)("favconfirm","local_exams"),type:_modal_factory.default.types.SAVE_CANCEL,body:(0,_str.get_string)("favconfirmheader","local_exams",name)}).done(function(modal){this.modal=modal,modal.setSaveButtonText((0,_str.get_string)("addfav","local_exams")),modal.getRoot().on(_modal_events.default.save,function(e){e.preventDefault();var params={};params.userid=userid,params.itemtype=itemtype,params.itemid=itemid,params.component=component,params.courseid=courseid;params.component;_ajax.default.call([{methodname:"local_exams_addtofavourites",args:params}])[0].done((function(resp){$(".addshow"+itemid).hide(),$(".addhide"+itemid).hide(),$(".removehide"+itemid).show(),$(".removeshow"+itemid).show(),HomePage.confirmbox((0,_str.get_string)("addfavsuccess","local_exams")),modal.destroy()})).fail((function(){console.log("exception")}))}.bind(this)),modal.show()}.bind(this))}}))}}));

//# sourceMappingURL=fav.min.js.map