{"version":3,"file":"fav.min.js","sources":["../src/fav.js"],"sourcesContent":["//import TPDynamicForm from 'local_exams/dynamicform';\nimport {get_string as getString} from 'core/str';\nimport ModalFactory from 'core/modal_factory';\nimport Ajax from 'core/ajax';\nimport ModalForm from 'core_form/modalform';\nimport ModalEvents from 'core/modal_events';\nimport Templates from 'core/templates';\nimport homepage from 'theme_academy/homepage';\n\nconst Selectors = {\n    actions: {\n        removefavourites: '[data-action=\"removefavourites\"]',\n        addtofavourites: '[data-action=\"addtofavourites\"]',\n    },\n};\nlet HomePage = new homepage();\nexport const init = () => {\n    document.addEventListener('click', function(e) {\n       let removefavourites = e.target.closest(Selectors.actions.removefavourites);\n        if (removefavourites) {\n             e.preventDefault();\n             const action = removefavourites.getAttribute('data-action');\n             const userid = removefavourites.getAttribute('data-userid');\n             const itemtype = removefavourites.getAttribute('data-itemtype');\n             const itemid = removefavourites.getAttribute('data-itemid');\n             const component = removefavourites.getAttribute('data-component');\n             const courseid = removefavourites.getAttribute('data-courseid');\n\n            ModalFactory.create({\n                title: getString('remfavconfirm', 'local_exams'),\n                type: ModalFactory.types.SAVE_CANCEL,\n                body: getString('remfavconfirmheader', 'local_exams',name)\n            }).done(function(modal) {\n                this.modal = modal;\n                modal.setSaveButtonText(getString('yesremove', 'local_exams'));\n                modal.getRoot().on(ModalEvents.save, function(e) {\n                    e.preventDefault();\n                    var params = {};\n                    params.userid = userid;\n                    params.itemtype = itemtype;\n                    params.itemid = itemid;\n                    params.component = component;\n                    params.courseid = courseid;\n                    var html='<i class=\"fa fa-star addfav\" data-component=\"'+params.component+'\" data-action=\"addtofavourites\" data-itemtype=\"'+itemtype+'\" data-itemid=\"'+itemid+'\" data-userid=\"'+userid+'\"  data-courseid=\"'+courseid+'\" title=\"JS Add To Favourites\" id=\"add'+itemid+'\" style=\"color: #2b2b2b;\"></i>';\n                    var promise = Ajax.call([{\n                        methodname: 'local_exams_removefavourites',\n                        args: params\n                    }]);\n                    promise[0].done(function(resp) {\n                         $(\".removeshow\"+itemid).hide();\n                         $(\".removehide\"+itemid).hide();\n                         $(\".addhide\"+itemid).show();\n                         $(\".addshow\"+itemid).show();\n                         modal.destroy();\n                         HomePage.confirmbox(getString('removefavsuccess', 'local_exams'));\n                    }).fail(function() {\n                        console.log('exception');\n                    });       \n                }.bind(this));\n                modal.show();\n            }.bind(this));\n        }\n        let addtofavourites = e.target.closest(Selectors.actions.addtofavourites);\n        if (addtofavourites) {\n             e.preventDefault();\n             const action = addtofavourites.getAttribute('data-action');\n             const userid = addtofavourites.getAttribute('data-userid');\n             const itemtype = addtofavourites.getAttribute('data-itemtype');\n             const itemid = addtofavourites.getAttribute('data-itemid');\n             const component = addtofavourites.getAttribute('data-component');\n             const courseid = addtofavourites.getAttribute('data-courseid');\n            ModalFactory.create({\n                title: getString('favconfirm', 'local_exams'),\n                type: ModalFactory.types.SAVE_CANCEL,\n                body: getString('favconfirmheader', 'local_exams',name)\n            }).done(function(modal) {\n                this.modal = modal;\n                modal.setSaveButtonText(getString('addfav', 'local_exams'));\n                modal.getRoot().on(ModalEvents.save, function(e) {\n                    e.preventDefault();\n                    var params = {};\n                    params.userid = userid;\n                    params.itemtype = itemtype;\n                    params.itemid = itemid;\n                    params.component = component;\n                    params.courseid = courseid;\n                    var html='<i class=\"fa fa-star removefav\" data-component=\"'+params.component+'\" data-action=\"removefavourites\" data-itemtype=\"'+itemtype+'\" data-itemid=\"'+itemid+'\" data-userid=\"'+userid+'\"  data-courseid=\"'+courseid+'\" title=\"JS Remove Favourites\" id=\"remove'+itemid+'\" style=\"color: #004c98;\"></i>';\n                    var promise = Ajax.call([{\n                        methodname: 'local_exams_addtofavourites',\n                        args: params\n                    }]);\n                    promise[0].done(function(resp) {\n                     $(\".addshow\"+itemid).hide();   \n                     $(\".addhide\"+itemid).hide();   \n                     $(\".removehide\"+itemid).show();\n                     $(\".removeshow\"+itemid).show();\n                      HomePage.confirmbox(getString('addfavsuccess', 'local_exams'));\n                     modal.destroy();\n                    }).fail(function() {\n                        console.log('exception');\n                    });       \n                }.bind(this));\n                modal.show();\n            }.bind(this));\n        }\n       \n    });\n};\n"],"names":["Selectors","removefavourites","addtofavourites","HomePage","homepage","document","addEventListener","e","target","closest","preventDefault","getAttribute","userid","itemtype","itemid","component","courseid","create","title","type","ModalFactory","types","SAVE_CANCEL","body","name","done","modal","setSaveButtonText","getRoot","on","ModalEvents","save","params","Ajax","call","methodname","args","resp","$","hide","show","destroy","confirmbox","fail","console","log","bind","this"],"mappings":"4rBASMA,kBACO,CACLC,iBAAkB,mCAClBC,gBAAiB,uCAGrBC,SAAW,IAAIC,gCACC,KAChBC,SAASC,iBAAiB,SAAS,SAASC,OACrCN,iBAAmBM,EAAEC,OAAOC,QAAQT,kBAAkBC,qBACrDA,iBAAkB,CACjBM,EAAEG,iBACaT,iBAAiBU,aAAa,qBACvCC,OAASX,iBAAiBU,aAAa,eACvCE,SAAWZ,iBAAiBU,aAAa,iBACzCG,OAASb,iBAAiBU,aAAa,eACvCI,UAAYd,iBAAiBU,aAAa,kBAC1CK,SAAWf,iBAAiBU,aAAa,wCAEnCM,OAAO,CAChBC,OAAO,mBAAU,gBAAiB,eAClCC,KAAMC,uBAAaC,MAAMC,YACzBC,MAAM,mBAAU,sBAAuB,cAAcC,QACtDC,KAAK,SAASC,YACRA,MAAQA,MACbA,MAAMC,mBAAkB,mBAAU,YAAa,gBAC/CD,MAAME,UAAUC,GAAGC,sBAAYC,KAAM,SAASxB,GAC1CA,EAAEG,qBACEsB,OAAS,GACbA,OAAOpB,OAASA,OAChBoB,OAAOnB,SAAWA,SAClBmB,OAAOlB,OAASA,OAChBkB,OAAOjB,UAAYA,UACnBiB,OAAOhB,SAAWA,SACuCgB,OAAOjB,UAClDkB,cAAKC,KAAK,CAAC,CACrBC,WAAY,+BACZC,KAAMJ,UAEF,GAAGP,MAAK,SAASY,MACpBC,EAAE,cAAcxB,QAAQyB,OACxBD,EAAE,cAAcxB,QAAQyB,OACxBD,EAAE,WAAWxB,QAAQ0B,OACrBF,EAAE,WAAWxB,QAAQ0B,OACrBd,MAAMe,UACNtC,SAASuC,YAAW,mBAAU,mBAAoB,mBACpDC,MAAK,WACJC,QAAQC,IAAI,iBAElBC,KAAKC,OACPrB,MAAMc,QACRM,KAAKC,WAEP7C,gBAAkBK,EAAEC,OAAOC,QAAQT,kBAAkBE,oBACrDA,gBAAiB,CAChBK,EAAEG,iBACaR,gBAAgBS,aAAa,qBACtCC,OAASV,gBAAgBS,aAAa,eACtCE,SAAWX,gBAAgBS,aAAa,iBACxCG,OAASZ,gBAAgBS,aAAa,eACtCI,UAAYb,gBAAgBS,aAAa,kBACzCK,SAAWd,gBAAgBS,aAAa,wCAClCM,OAAO,CAChBC,OAAO,mBAAU,aAAc,eAC/BC,KAAMC,uBAAaC,MAAMC,YACzBC,MAAM,mBAAU,mBAAoB,cAAcC,QACnDC,KAAK,SAASC,YACRA,MAAQA,MACbA,MAAMC,mBAAkB,mBAAU,SAAU,gBAC5CD,MAAME,UAAUC,GAAGC,sBAAYC,KAAM,SAASxB,GAC1CA,EAAEG,qBACEsB,OAAS,GACbA,OAAOpB,OAASA,OAChBoB,OAAOnB,SAAWA,SAClBmB,OAAOlB,OAASA,OAChBkB,OAAOjB,UAAYA,UACnBiB,OAAOhB,SAAWA,SAC0CgB,OAAOjB,UACrDkB,cAAKC,KAAK,CAAC,CACrBC,WAAY,8BACZC,KAAMJ,UAEF,GAAGP,MAAK,SAASY,MACxBC,EAAE,WAAWxB,QAAQyB,OACrBD,EAAE,WAAWxB,QAAQyB,OACrBD,EAAE,cAAcxB,QAAQ0B,OACxBF,EAAE,cAAcxB,QAAQ0B,OACvBrC,SAASuC,YAAW,mBAAU,gBAAiB,gBAChDhB,MAAMe,aACJE,MAAK,WACJC,QAAQC,IAAI,iBAElBC,KAAKC,OACPrB,MAAMc,QACRM,KAAKC"}