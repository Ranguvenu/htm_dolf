{"version":3,"file":"custom.min.js","sources":["../src/custom.js"],"sourcesContent":["define(['local_notifications/jquery.dataTables', 'jquery', 'core/str', 'core/modal_factory', 'core/modal_events'],\r\n        function(dataTable, $, Str, ModalFactory) {\r\n    return {\r\n        init: function() {\r\n            $(document).on('change', '#id_notificationid', function() {\r\n                var notificationid = $(this).find(\"option:selected\").val();\r\n                if (notificationid !== null) {\r\n                      $.ajax({\r\n                        method: \"GET\",\r\n                        dataType: \"json\",\r\n                        url: M.cfg.wwwroot + \"/local/notifications/custom_ajax.php?notificationid=\"+notificationid+\"&page=1\",\r\n                        success: function(data){\r\n          \r\n                            $(\".form-control-static\").html(data.datastrings);\r\n                            var template ='';\r\n                            $.each( data.datamoduleids, function( index, value) {\r\n                                template += '<option value = ' + value.id + ' >' +value.name + '</option>';\r\n                           });\r\n                            \r\n                            if(template){\r\n                                $(\".module_label\").css('display','block');\r\n                                $(\"div .module_label .tag-info\").html(\"\");\r\n                                $(\"#id_moduleid\").html(template);\r\n                                $(\".module_label label\").html(data.datamodule_label);\r\n\r\n                            }else{\r\n                                $(\".module_label\").css('display','none');\r\n                            }\r\n                            \r\n                        }\r\n                    });\r\n                }\r\n            });\r\n        },\r\n        notificationDatatable: function(args) {\r\n            params = [];\r\n            params.action = 'display';\r\n            params.id = args.id;\r\n            params.context = args.context;\r\n            var oTable = $('#notification_info').dataTable({\r\n                \"bInfo\" : false,\r\n                \"bLengthChange\": false,\r\n                \"order\": [],\r\n                \"language\": {\r\n                        \"paginate\": {\r\n                            \"next\": \">\",\r\n                            \"previous\": \"<\"\r\n                        }\r\n                },\r\n                \"pageLength\": 10\r\n            });\r\n        },\r\n        deletenotification: function(elem) {\r\n            return Str.get_strings([{\r\n                key: 'deletenotification',\r\n                component: 'local_notifications'\r\n            }, {\r\n                key: 'deleteconfirm_msg',\r\n                component: 'local_notifications'\r\n            }, {\r\n                key: 'yes',\r\n                component: 'moodle'\r\n            }, {\r\n                key: 'no',\r\n                component: 'moodle'\r\n            }]).then(function(s) {\r\n                ModalFactory.create({\r\n                    title: s[0],\r\n                    type: ModalFactory.types.DEFAULT,\r\n                    body: s[1],\r\n                    footer: '<button type=\"button\" class=\"btn btn-primary\" data-action=\"save\">'+s[2]+'</button>&nbsp;' +\r\n        '<button type=\"button\" class=\"btn btn-secondary\" data-action=\"cancel\">'+s[3]+'</button>'\r\n                }).done(function(modal) {\r\n                    this.modal = modal;\r\n                    modal.getRoot().find('[data-action=\"save\"]').on('click', function() {\r\n                        window.location.href ='index.php?delete='+elem+'&confirm=1&sesskey=' + M.cfg.sesskey;\r\n                    }.bind(this));\r\n                    modal.getFooter().find('[data-action=\"cancel\"]').on('click', function() {\r\n                        modal.setBody('');\r\n                        modal.hide();\r\n                    });\r\n                    modal.show();\r\n                }.bind(this));\r\n            }.bind(this));\r\n        }\r\n        \r\n    };\r\n});\r\n"],"names":["define","dataTable","$","Str","ModalFactory","init","document","on","notificationid","this","find","val","ajax","method","dataType","url","M","cfg","wwwroot","success","data","html","datastrings","template","each","datamoduleids","index","value","id","name","css","datamodule_label","notificationDatatable","args","params","action","context","deletenotification","elem","get_strings","key","component","then","s","create","title","type","types","DEFAULT","body","footer","done","modal","getRoot","window","location","href","sesskey","bind","getFooter","setBody","hide","show"],"mappings":"AAAAA,oCAAO,CAAC,wCAAyC,SAAU,WAAY,qBAAsB,sBACrF,SAASC,UAAWC,EAAGC,IAAKC,oBACzB,CACHC,KAAM,WACFH,EAAEI,UAAUC,GAAG,SAAU,sBAAsB,eACvCC,eAAiBN,EAAEO,MAAMC,KAAK,mBAAmBC,MAC9B,OAAnBH,gBACEN,EAAEU,KAAK,CACLC,OAAQ,MACRC,SAAU,OACVC,IAAKC,EAAEC,IAAIC,QAAU,uDAAuDV,eAAe,UAC3FW,QAAS,SAASC,MAEdlB,EAAE,wBAAwBmB,KAAKD,KAAKE,iBAChCC,SAAU,GACdrB,EAAEsB,KAAMJ,KAAKK,eAAe,SAAUC,MAAOC,OACzCJ,UAAY,mBAAqBI,MAAMC,GAAK,KAAMD,MAAME,KAAO,eAGhEN,UACCrB,EAAE,iBAAiB4B,IAAI,UAAU,SACjC5B,EAAE,+BAA+BmB,KAAK,IACtCnB,EAAE,gBAAgBmB,KAAKE,UACvBrB,EAAE,uBAAuBmB,KAAKD,KAAKW,mBAGnC7B,EAAE,iBAAiB4B,IAAI,UAAU,eAQzDE,sBAAuB,SAASC,MAC5BC,OAAS,GACTA,OAAOC,OAAS,UAChBD,OAAON,GAAKK,KAAKL,GACjBM,OAAOE,QAAUH,KAAKG,QACTlC,EAAE,sBAAsBD,UAAU,QACjC,iBACO,QACR,YACG,UACQ,MACA,aACI,iBAGV,MAGtBoC,mBAAoB,SAASC,aAClBnC,IAAIoC,YAAY,CAAC,CACpBC,IAAK,qBACLC,UAAW,uBACZ,CACCD,IAAK,oBACLC,UAAW,uBACZ,CACCD,IAAK,MACLC,UAAW,UACZ,CACCD,IAAK,KACLC,UAAW,YACXC,KAAK,SAASC,GACdvC,aAAawC,OAAO,CAChBC,MAAOF,EAAE,GACTG,KAAM1C,aAAa2C,MAAMC,QACzBC,KAAMN,EAAE,GACRO,OAAQ,oEAAoEP,EAAE,GAAtE,uFACoDA,EAAE,GAAG,cAClEQ,KAAK,SAASC,YACRA,MAAQA,MACbA,MAAMC,UAAU3C,KAAK,wBAAwBH,GAAG,QAAS,WACrD+C,OAAOC,SAASC,KAAM,oBAAoBlB,KAAK,sBAAwBtB,EAAEC,IAAIwC,SAC/EC,KAAKjD,OACP2C,MAAMO,YAAYjD,KAAK,0BAA0BH,GAAG,SAAS,WACzD6C,MAAMQ,QAAQ,IACdR,MAAMS,UAEVT,MAAMU,QACRJ,KAAKjD,QACTiD,KAAKjD"}