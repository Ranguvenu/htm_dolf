define("local_events/form_selector_datasource",["jquery","core/ajax","core/notification","core/str"],(function($,Ajax,Notification,Str){return{processResults:function(selector,results){var options=[];return $.each(results.data,(function(index,response){options.push({value:response.id,label:response.fullname})})),options},transport:function(selector,query,callback){var el=$(selector),listid=0,module=0,valselect=0,itemid=0,type=el.data("type");switch(type){case"speakerlist":case"sponsorlist":listid=el.data("eventid"),module=el.data("finance");break;case"partnerlist":listid=el.data("eventid"),module=el.data("finance"),(valselect=$("#el_partner option:selected").val())||(valselect="0");break;case"agenda_speakerlist":case"userlist":listid=el.data("eventid");break;case"examhalls":module="exam"}1==el.data("finance")&&($("body").on("change",'input[name="type"]',(function(){$('input[name="amount"]').val("")})),$("body").on("change",'input[name="expensetype"]',(function(){3==$(this).val()&&($('input[name="amount"]').attr("readonly",!1),$("select[name='partnerid'] option:selected").prop("selected",!1),$("select[name='partnerid']").parent().find(".badge-info").html(""),Str.get_string("selectpartner","local_events").then((function(title){$("select[name='partnerid']").parent().find(".badge-info").html(title)})),$("select[name='speakerid'] option:selected").prop("selected",!1),$("select[name='speakerid']").parent().find(".badge-info").html(""),Str.get_string("selectspeaker","local_events").then((function(title){$("select[name='speakerid']").parent().find(".badge-info").html(title)})),$("select[name='sponsorid'] option:selected").prop("selected",!1),$("select[name='sponsorid']").parent().find(".badge-info").html(""),Str.get_string("selectsponsor","local_events").then((function(title){$("select[name='sponsorid']").parent().find(".badge-info").html(title)})));$('input[name="amount"]').val("")})),$(selector).change((function(){"sponsorlist"==(type=el.data("type"))&&($("select[name='partnerid'] option:selected").prop("selected",!1),$("select[name='partnerid']").parent().find(".badge-info").html(""),Str.get_string("selectpartner","local_events").then((function(title){$("select[name='partnerid']").parent().find(".badge-info").html(title)})),$("select[name='speakerid'] option:selected").prop("selected",!1),$("select[name='speakerid']").parent().find(".badge-info").html(""),Str.get_string("selectspeaker","local_events").then((function(title){$("select[name='speakerid']").parent().find(".badge-info").html(title)})));"speakerlist"==type&&($("select[name='partnerid'] option:selected").prop("selected",!1),$("select[name='partnerid']").parent().find(".badge-info").html(""),Str.get_string("selectpartner","local_events").then((function(title){$("select[name='partnerid']").parent().find(".badge-info").html(title)})),$("select[name='sponsorid'] option:selected").prop("selected",!1),$("select[name='sponsorid']").parent().find(".badge-info").html(""),Str.get_string("selectsponsor","local_events").then((function(title){$("select[name='sponsorid']").parent().find(".badge-info").html(title)})));if("partnerlist"==type){$("select[name='speakerid'] option:selected").prop("selected",!1),$("select[name='speakerid']").parent().find(".badge-info").html(""),Str.get_string("selectspeaker","local_events").then((function(title){$("select[name='speakerid']").parent().find(".badge-info").html(title)})),$("select[name='sponsorid'] option:selected").prop("selected",!1),$("select[name='sponsorid']").parent().find(".badge-info").html(""),Str.get_string("selectsponsor","local_events").then((function(title){$("select[name='sponsorid']").parent().find(".badge-info").html(title)})),listid=el.data("eventid");var s_value=$(selector+" option:selected").val();itemid=""!=s_value?s_value:0,Ajax.call([{methodname:"local_events_financeamount",dataType:"text",args:{type:type,listid:listid,itemid:itemid}}])[0].done((function(results){$('input[name="amount"]').val(results),""!=results?$('input[name="amount"]').attr("readonly",!0):$('input[name="amount"]').attr("readonly",!1)})).catch(Notification.exception)}})));Ajax.call([{methodname:"local_events_form_selector",args:{query:query,type:type,listid:listid,module:module,valselect:valselect}}])[0].then(callback).catch(Notification.exception)}}}));

//# sourceMappingURL=form_selector_datasource.min.js.map