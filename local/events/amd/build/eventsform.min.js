define("local_events/eventsform",["exports","core_form/modalform","core/modal_factory","core/modal_events","core/ajax","core/str"],(function(_exports,_modalform,_modal_factory,_modal_events,_ajax,_str){function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.init=void 0,_modalform=_interopRequireDefault(_modalform),_modal_factory=_interopRequireDefault(_modal_factory),_modal_events=_interopRequireDefault(_modal_events),_ajax=_interopRequireDefault(_ajax);const Selectors_actions={deleteevent:'[data-action="deleteevent"]',createagenda:'[data-action="createagenda"]',deletagenda:'[data-action="deletagenda"]',createattendee:'[data-action="createattendee"]',deletattendee:'[data-action="deletattendee"]',viewagenda:'[data-action="viewagenda"]',viewattendee:'[data-action="viewattendee"]',createspeaker:'[data-action="createspeaker"]',viewspeaker:'[data-action="viewspeaker"]',deletspeaker:'[data-action="deletspeaker"]',createsponsor:'[data-action="createsponsor"]',viewsponsor:'[data-action="viewsponsor"]',deletesponsor:'[data-action="deletesponsor"]',createpartner:'[data-action="createpartner"]',viewpartner:'[data-action="viewpartner"]',deletepartner:'[data-action="deletepartner"]',editfinance:'[data-action="editfinance"]'};_exports.init=()=>{document.addEventListener("click",(function(e){e.stopImmediatePropagation();let element=e.target.closest(Selectors_actions.createagenda);if(element){e.preventDefault();const title=element.getAttribute("data-id")?(0,_str.get_string)("editagenda","local_events",element.getAttribute("data-name")):(0,_str.get_string)("addnewtopic","local_events"),form=new _modalform.default({formClass:"local_events\\form\\agendaform",args:{id:element.getAttribute("data-id"),eventid:element.getAttribute("data-eventid")},modalConfig:{title:title},returnFocus:element});form.addEventListener(form.events.FORM_SUBMITTED,(()=>window.location.reload())),form.show()}let deleteelement=e.target.closest(Selectors_actions.deleteevent);if(deleteelement){const eventid=deleteelement.getAttribute("data-id"),eventname=deleteelement.getAttribute("data-name");_modal_factory.default.create({title:(0,_str.get_string)("delete","local_events"),type:_modal_factory.default.types.SAVE_CANCEL,body:(0,_str.get_string)("deleteconfirm","local_events",eventname)}).done(function(modal){this.modal=modal,modal.setSaveButtonText((0,_str.get_string)("delete","local_events")),modal.getRoot().on(_modal_events.default.save,function(e){e.preventDefault();var params={confirm:!0};params.eventid=eventid,_ajax.default.call([{methodname:"local_events_deleteevent",args:params}])[0].done((function(){window.location.href=M.cfg.wwwroot+"/local/events/index.php"})).fail((function(){}))}.bind(this)),modal.show()}.bind(this))}let deletagenda=e.target.closest(Selectors_actions.deletagenda);if(deletagenda){const agendaid=deletagenda.getAttribute("data-id"),eventid=deletagenda.getAttribute("data-eventid"),agendaname=deletagenda.getAttribute("data-name");_modal_factory.default.create({title:(0,_str.get_string)("delete","local_events"),type:_modal_factory.default.types.SAVE_CANCEL,body:(0,_str.get_string)("deleteconfirm","local_events",agendaname)}).done(function(modal){this.modal=modal,modal.setSaveButtonText((0,_str.get_string)("delete","local_events")),modal.getRoot().on(_modal_events.default.save,function(e){e.preventDefault();var params={confirm:!0};params.agendaid=agendaid,params.eventid=eventid,_ajax.default.call([{methodname:"local_events_delete_agenda",args:params}])[0].done((function(){window.location.reload(!0)})).fail((function(){}))}.bind(this)),modal.show()}.bind(this))}let attendees=e.target.closest(Selectors_actions.createattendee);if(attendees){e.preventDefault();const title=attendees.getAttribute("data-id")?(0,_str.get_string)("editattendee","local_events",attendees.getAttribute("data-name")):(0,_str.get_string)("addattendee","local_events"),form=new _modalform.default({formClass:"local_events\\form\\attendeeform",args:{id:attendees.getAttribute("data-id"),eventid:attendees.getAttribute("data-eventid")},modalConfig:{title:title},returnFocus:attendees});form.addEventListener(form.events.FORM_SUBMITTED,(event=>{event.detail.returnparams?window.location.href=event.detail.returnparams:window.location.reload()})),form.show()}let deletattendee=e.target.closest(Selectors_actions.deletattendee);if(deletattendee){const attid=deletattendee.getAttribute("data-id"),eventid=deletattendee.getAttribute("data-eventid"),attname=deletattendee.getAttribute("data-name");_modal_factory.default.create({title:(0,_str.get_string)("delete","local_events"),type:_modal_factory.default.types.SAVE_CANCEL,body:(0,_str.get_string)("deleteconfirm","local_events",attname)}).done(function(modal){this.modal=modal,modal.setSaveButtonText((0,_str.get_string)("delete","local_events")),modal.getRoot().on(_modal_events.default.save,function(e){e.preventDefault();var params={confirm:!0};params.attid=attid,params.eventid=eventid,_ajax.default.call([{methodname:"local_events_delete_attendees",args:params}])[0].done((function(){window.location.reload(!0)})).fail((function(){}))}.bind(this)),modal.show()}.bind(this))}let viewattendee=e.target.closest(Selectors_actions.viewattendee);if(viewattendee){const attid=viewattendee.getAttribute("data-id"),eventid=viewattendee.getAttribute("data-eventid"),attname=viewattendee.getAttribute("data-name");(params={}).attid=attid,params.eventid=eventid,_ajax.default.call([{methodname:"local_events_view_attendee",args:params}])[0].done((function(resp){_modal_factory.default.create({title:(0,_str.get_string)("view","local_events",attname),body:resp.options}).done(function(modal){this.modal=modal,modal.show()}.bind(this))})).fail((function(){}))}let viewagenda=e.target.closest(Selectors_actions.viewagenda);if(viewagenda){const agdid=viewagenda.getAttribute("data-id"),eventid=viewagenda.getAttribute("data-eventid"),agdname=viewagenda.getAttribute("data-name");(params={}).agdid=agdid,params.eventid=eventid,_ajax.default.call([{methodname:"local_events_view_agenda",args:params}])[0].done((function(resp){_modal_factory.default.create({title:(0,_str.get_string)("view","local_events",agdname),body:resp.options}).done(function(modal){this.modal=modal,modal.show()}.bind(this))})).fail((function(){}))}let speaker=e.target.closest(Selectors_actions.createspeaker);if(speaker){e.preventDefault();const title=speaker.getAttribute("data-id")?(0,_str.get_string)("editspeaker","local_events",speaker.getAttribute("data-name")):(0,_str.get_string)("addspeaker","local_events"),form=new _modalform.default({formClass:"local_events\\form\\speakerform",args:{id:speaker.getAttribute("data-id"),eventid:speaker.getAttribute("data-eventid")},modalConfig:{title:title},returnFocus:speaker});form.addEventListener(form.events.FORM_SUBMITTED,(()=>window.location.reload())),form.show()}let deletspeaker=e.target.closest(Selectors_actions.deletspeaker);if(deletspeaker){const speakerid=deletspeaker.getAttribute("data-id"),eventid=deletspeaker.getAttribute("data-eventid"),speakername=deletspeaker.getAttribute("data-name");_modal_factory.default.create({title:(0,_str.get_string)("delete","local_events"),type:_modal_factory.default.types.SAVE_CANCEL,body:(0,_str.get_string)("deleteconfirm","local_events",speakername)}).done(function(modal){this.modal=modal,modal.setSaveButtonText((0,_str.get_string)("delete","local_events")),modal.getRoot().on(_modal_events.default.save,function(e){e.preventDefault();var params={confirm:!0};params.speakerid=speakerid,params.eventid=eventid,_ajax.default.call([{methodname:"local_events_delete_speaker",args:params}])[0].done((function(){window.location.reload(!0)})).fail((function(){}))}.bind(this)),modal.show()}.bind(this))}let viewspeaker=e.target.closest(Selectors_actions.viewspeaker);if(viewspeaker){const speakerid=viewspeaker.getAttribute("data-id"),eventid=viewspeaker.getAttribute("data-eventid");(params={}).speakerid=speakerid,params.eventid=eventid,_ajax.default.call([{methodname:"local_events_view_speaker",args:params}])[0].done((function(resp){_modal_factory.default.create({title:(0,_str.get_string)("viewspeaker","local_events"),body:resp.options}).done(function(modal){this.modal=modal,modal.show()}.bind(this))})).fail((function(){}))}let createsponsor=e.target.closest(Selectors_actions.createsponsor);if(createsponsor){e.preventDefault();const title=createsponsor.getAttribute("data-id")?(0,_str.get_string)("editsponsor","local_events",createsponsor.getAttribute("data-name")):(0,_str.get_string)("addnewsponsor","local_events"),form=new _modalform.default({formClass:"local_events\\form\\sponsorform",args:{id:createsponsor.getAttribute("data-id"),eventid:createsponsor.getAttribute("data-eventid")},modalConfig:{title:title},returnFocus:speaker});form.addEventListener(form.events.FORM_SUBMITTED,(()=>window.location.reload())),form.show()}let deletesponsor=e.target.closest(Selectors_actions.deletesponsor);if(deletesponsor){const sponsorid=deletesponsor.getAttribute("data-id"),eventid=deletesponsor.getAttribute("data-eventid"),sponsorname=deletesponsor.getAttribute("data-name");_modal_factory.default.create({title:(0,_str.get_string)("delete","local_events"),type:_modal_factory.default.types.SAVE_CANCEL,body:(0,_str.get_string)("deleteconfirm","local_events",sponsorname)}).done(function(modal){this.modal=modal,modal.setSaveButtonText((0,_str.get_string)("delete","local_events")),modal.getRoot().on(_modal_events.default.save,function(e){e.preventDefault();var params={confirm:!0};params.sponsorid=sponsorid,params.eventid=eventid,_ajax.default.call([{methodname:"local_events_delete_sponsor",args:params}])[0].done((function(){window.location.reload(!0)})).fail((function(){}))}.bind(this)),modal.show()}.bind(this))}let viewsponsor=e.target.closest(Selectors_actions.viewsponsor);if(viewsponsor){const sponsorid=viewsponsor.getAttribute("data-id"),eventid=viewsponsor.getAttribute("data-eventid");(params={}).sponsorid=sponsorid,params.eventid=eventid,_ajax.default.call([{methodname:"local_events_view_sponsor",args:params}])[0].done((function(resp){_modal_factory.default.create({title:(0,_str.get_string)("viewsponsor","local_events"),body:resp.options}).done(function(modal){this.modal=modal,modal.show()}.bind(this))})).fail((function(){}))}let partner=e.target.closest(Selectors_actions.createpartner);if(partner){e.preventDefault();const title=partner.getAttribute("data-id")?(0,_str.get_string)("editpartner","local_events",partner.getAttribute("data-name")):(0,_str.get_string)("newpartner","local_events"),form=new _modalform.default({formClass:"local_events\\form\\partnerform",args:{id:partner.getAttribute("data-id"),eventid:partner.getAttribute("data-eventid")},modalConfig:{title:title},returnFocus:partner});form.addEventListener(form.events.FORM_SUBMITTED,(()=>window.location.reload())),form.show()}let viewpartner=e.target.closest(Selectors_actions.viewpartner);if(viewpartner){const partnerid=viewpartner.getAttribute("data-id"),eventid=viewpartner.getAttribute("data-eventid"),partnername=viewpartner.getAttribute("data-name");var params;(params={}).partnerid=partnerid,params.eventid=eventid,_ajax.default.call([{methodname:"local_events_view_partner",args:params}])[0].done((function(resp){_modal_factory.default.create({title:(0,_str.get_string)("view","local_events",partnername),body:resp.options}).done(function(modal){this.modal=modal,modal.show()}.bind(this))})).fail((function(){}))}let deletepartner=e.target.closest(Selectors_actions.deletepartner);if(deletepartner){const partnerid=deletepartner.getAttribute("data-id"),eventid=deletepartner.getAttribute("data-eventid"),partnername=deletepartner.getAttribute("data-name");_modal_factory.default.create({title:(0,_str.get_string)("delete","local_events"),type:_modal_factory.default.types.SAVE_CANCEL,body:(0,_str.get_string)("deleteconfirm","local_events",partnername)}).done(function(modal){this.modal=modal,modal.setSaveButtonText((0,_str.get_string)("delete","local_events")),modal.getRoot().on(_modal_events.default.save,function(e){e.preventDefault();var params={confirm:!0};params.partnerid=partnerid,params.eventid=eventid,_ajax.default.call([{methodname:"local_events_delete_partner",args:params}])[0].done((function(){window.location.reload(!0)})).fail((function(){}))}.bind(this)),modal.show()}.bind(this))}let editfinance=e.target.closest(Selectors_actions.editfinance);if(editfinance){e.preventDefault();const title=editfinance.getAttribute("data-id")?(0,_str.get_string)("editattendee","local_events",editfinance.getAttribute("data-name")):(0,_str.get_string)("additem","local_events"),form=new _modalform.default({formClass:"local_events\\form\\financeform",args:{id:editfinance.getAttribute("data-id"),eventid:editfinance.getAttribute("data-eventid")},modalConfig:{title:title},returnFocus:editfinance});form.addEventListener(form.events.FORM_SUBMITTED,(()=>window.location.reload())),form.show()}}))}}));

//# sourceMappingURL=eventsform.min.js.map