{"version":3,"file":"hallevents.min.js","sources":["../src/hallevents.js"],"sourcesContent":["// This file is part of Moodle - http://moodle.org/\r\n//\r\n// Moodle is free software: you can redistribute it and/or modify\r\n// it under the terms of the GNU General Public License as published by\r\n// the Free Software Foundation, either version 3 of the License, or\r\n// (at your option) any later version.\r\n//\r\n// Moodle is distributed in the hope that it will be useful,\r\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\r\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\r\n// GNU General Public License for more details.\r\n//\r\n// You should have received a copy of the GNU General Public License\r\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\r\n\r\nimport Ajax from 'core/ajax';\r\nimport Templates from 'core/templates';\r\nimport {get_string as getString} from 'core/str';\r\nimport $ from 'jquery';\r\nimport cardPaginate from 'theme_academy/cardPaginate';\r\n\r\nexport const init = () => {\r\n    $('select[name=\"startdate[day]\"]').on('change', function(e) {\r\n        $('.entityhall .badge-info').html('');\r\n        $('.entityhall .badge-info').html('Select Hall');\r\n        $(\"select[name='halladdress']\").val(\"0\");\r\n        var params = {};\r\n        params.sessionkey = $(\"input[name='sesskey']\").val();\r\n        params.type = $(\"select[name='halladdress']\").data('type');\r\n        params.id = $(\"select[name='halladdress']\").data('id');\r\n        var promise = Ajax.call([{\r\n            methodname: 'remove_reservations',\r\n            args: params\r\n        }]);\r\n        promise[0].done(function(resp) {\r\n            $(\".entityhalldetails\").html('');\r\n            console.log('Successfully reservations removed');\r\n        }).fail(function() {\r\n             console.log('exception');\r\n        });\r\n    });\r\n    $('select[name=\"startdate[month]\"]').on('change', function(e) {\r\n        $('.entityhall .badge-info').html('');\r\n        $('.entityhall .badge-info').html('Select Hall');\r\n        $(\"select[name='halladdress']\").val(\"0\");        \r\n        var params = {};\r\n        params.sessionkey = $(\"input[name='sesskey']\").val();\r\n        params.type = $(\"select[name='halladdress']\").data('type');\r\n        params.id = $(\"select[name='halladdress']\").data('id');\r\n        var promise = Ajax.call([{\r\n            methodname: 'remove_reservations',\r\n            args: params\r\n        }]);\r\n        promise[0].done(function(resp) {\r\n            $(\".entityhalldetails\").html('');\r\n            console.log('Successfully reservations removed');\r\n        }).fail(function() {\r\n             console.log('exception');\r\n        });\r\n    });\r\n    $('select[name=\"startdate[year]\"]').on('change', function(e) {\r\n        $('.entityhall .badge-info').html('');\r\n        $('.entityhall .badge-info').html('Select Hall');\r\n        $(\"select[name='halladdress']\").val(\"0\");        \r\n        var params = {};\r\n        params.sessionkey = $(\"input[name='sesskey']\").val();\r\n        params.type = $(\"select[name='halladdress']\").data('type');\r\n        params.id = $(\"select[name='halladdress']\").data('id');\r\n        var promise = Ajax.call([{\r\n            methodname: 'remove_reservations',\r\n            args: params\r\n        }]);\r\n        promise[0].done(function(resp) {\r\n            $(\".entityhalldetails\").html('');\r\n            console.log('Successfully reservations removed');\r\n        }).fail(function() {\r\n             console.log('exception');\r\n        });\r\n    });\r\n};\r\n\r\nrequire(['jquery'], function($) {\r\n    $(document).ready(function(){\r\n        $(window).on('load', function(){\r\n            var pgeid = $('.pagelayout-base').attr(\"id\");\r\n            if(pgeid == 'page-local-trainingprogram-index' || pgeid == 'page-local-events-addevent' || pgeid == 'page-local-questionbank-questionbank') { \r\n                if(pgeid == 'page-local-trainingprogram-index') {\r\n                    var type = 'tprogram';\r\n                }\r\n                if( pgeid == 'page-local-events-addevent') {\r\n                    var type = 'event';\r\n                } \r\n                if(pgeid == 'page-local-questionbank-questionbank') {\r\n                    var type = 'questionbank';\r\n                }\r\n                var params = {};\r\n                params.sessionkey = $(\"input[name='sesskey']\").val();\r\n                params.type = type;\r\n                var promise = Ajax.call([{\r\n                    methodname: 'remove_reservations',\r\n                    args: params\r\n                }]);\r\n                promise[0].done(function(resp) {\r\n                    // $(\".entityhalldetails\").html('');\r\n                    console.log('Successfully reservations removed');\r\n                }).fail(function() {\r\n                     console.log('eventexception');\r\n                });\r\n            }\r\n        });\r\n    });\r\n});\r\n\r\n"],"names":["on","e","html","val","params","sessionkey","type","data","id","Ajax","call","methodname","args","done","resp","console","log","fail","require","$","document","ready","window","pgeid","attr"],"mappings":"ohBAqBoB,yBACd,iCAAiCA,GAAG,UAAU,SAASC,uBACnD,2BAA2BC,KAAK,wBAChC,2BAA2BA,KAAK,mCAChC,8BAA8BC,IAAI,SAChCC,OAAS,GACbA,OAAOC,YAAa,mBAAE,yBAAyBF,MAC/CC,OAAOE,MAAO,mBAAE,8BAA8BC,KAAK,QACnDH,OAAOI,IAAK,mBAAE,8BAA8BD,KAAK,MACnCE,cAAKC,KAAK,CAAC,CACrBC,WAAY,sBACZC,KAAMR,UAEF,GAAGS,MAAK,SAASC,0BACnB,sBAAsBZ,KAAK,IAC7Ba,QAAQC,IAAI,wCACbC,MAAK,WACHF,QAAQC,IAAI,uCAGnB,mCAAmChB,GAAG,UAAU,SAASC,uBACrD,2BAA2BC,KAAK,wBAChC,2BAA2BA,KAAK,mCAChC,8BAA8BC,IAAI,SAChCC,OAAS,GACbA,OAAOC,YAAa,mBAAE,yBAAyBF,MAC/CC,OAAOE,MAAO,mBAAE,8BAA8BC,KAAK,QACnDH,OAAOI,IAAK,mBAAE,8BAA8BD,KAAK,MACnCE,cAAKC,KAAK,CAAC,CACrBC,WAAY,sBACZC,KAAMR,UAEF,GAAGS,MAAK,SAASC,0BACnB,sBAAsBZ,KAAK,IAC7Ba,QAAQC,IAAI,wCACbC,MAAK,WACHF,QAAQC,IAAI,uCAGnB,kCAAkChB,GAAG,UAAU,SAASC,uBACpD,2BAA2BC,KAAK,wBAChC,2BAA2BA,KAAK,mCAChC,8BAA8BC,IAAI,SAChCC,OAAS,GACbA,OAAOC,YAAa,mBAAE,yBAAyBF,MAC/CC,OAAOE,MAAO,mBAAE,8BAA8BC,KAAK,QACnDH,OAAOI,IAAK,mBAAE,8BAA8BD,KAAK,MACnCE,cAAKC,KAAK,CAAC,CACrBC,WAAY,sBACZC,KAAMR,UAEF,GAAGS,MAAK,SAASC,0BACnB,sBAAsBZ,KAAK,IAC7Ba,QAAQC,IAAI,wCACbC,MAAK,WACHF,QAAQC,IAAI,oBAKzBE,QAAQ,CAAC,WAAW,SAASC,GACzBA,EAAEC,UAAUC,OAAM,WACdF,EAAEG,QAAQtB,GAAG,QAAQ,eACbuB,MAAQJ,EAAE,oBAAoBK,KAAK,SAC3B,oCAATD,OAAwD,8BAATA,OAAkD,wCAATA,MAAiD,IAC5H,oCAATA,UACKjB,KAAO,cAEF,8BAATiB,MACIjB,KAAO,WAEH,wCAATiB,MACKjB,KAAO,mBAEXF,OAAS,GACbA,OAAOC,WAAac,EAAE,yBAAyBhB,MAC/CC,OAAOE,KAAOA,KACAG,cAAKC,KAAK,CAAC,CACrBC,WAAY,sBACZC,KAAMR,UAEF,GAAGS,MAAK,SAASC,MAErBC,QAAQC,IAAI,wCACbC,MAAK,WACHF,QAAQC,IAAI"}