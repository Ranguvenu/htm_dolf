define("local_userapproval/user_custom_form",["exports","local_trainingprogram/dynamicform","core_form/modalform","core/modal_factory","core/modal_events","core/ajax","core/str"],(function(_exports,_dynamicform,_modalform,_modal_factory,_modal_events,_ajax,_str){function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.init=void 0,_dynamicform=_interopRequireDefault(_dynamicform),_modalform=_interopRequireDefault(_modalform),_modal_factory=_interopRequireDefault(_modal_factory),_modal_events=_interopRequireDefault(_modal_events),_ajax=_interopRequireDefault(_ajax);const Selectors_actions={createuser_custom_form:'[data-action="user_custom_form"]',useraddwallet:'[data-action="user_wallet_form"]',removerequest:'[data-action="removerequest"]'};_exports.init=()=>{document.addEventListener("click",(function(e){let element=e.target.closest(Selectors_actions.createuser_custom_form);if(element){e.preventDefault();const title=element.getAttribute("data-id")?(0,_str.get_string)("editcustom","local_userapproval",element.getAttribute("data-name")):(0,_str.get_string)("addcustom","local_userapproval"),form=new _dynamicform.default({formClass:"local_userapproval\\form\\user_custom_form",args:{id:element.getAttribute("data-id"),userid:element.getAttribute("data-userid")},modalConfig:{title:title},returnFocus:element});form.addEventListener(form.events.FORM_SUBMITTED,(()=>window.location.reload())),form.show()}let removerequest=e.target.closest(Selectors_actions.removerequest);if(removerequest){e.preventDefault();const orgid=removerequest.getAttribute("data-orgid"),userid=removerequest.getAttribute("data-userid"),orgname=removerequest.getAttribute("data-orgname");_modal_factory.default.create({title:(0,_str.get_string)("removeconfirm","local_userapproval"),type:_modal_factory.default.types.SAVE_CANCEL,body:(0,_str.get_string)("orgrequestremoveconfirm","local_userapproval",orgname)}).done(function(modal){this.modal=modal,modal.setSaveButtonText((0,_str.get_string)("orgrequestremoveconfirmtext","local_userapproval")),modal.getRoot().on(_modal_events.default.save,function(e){e.preventDefault();var params={};params.orgid=orgid,params.userid=userid,_ajax.default.call([{methodname:"local_userapproval_removeorgrequest",args:params}])[0].done((function(resp){window.location.reload(!0)})).fail((function(){console.log("exception")}))}.bind(this)),modal.show()}.bind(this))}let walletelement=e.target.closest(Selectors_actions.useraddwallet);if(walletelement){e.preventDefault();const title=(0,_str.get_string)("addwallet","local_userapproval"),form=new _modalform.default({formClass:"local_userapproval\\form\\user_wallet_form",args:{userid:walletelement.getAttribute("data-userid")},modalConfig:{title:title},returnFocus:walletelement});form.addEventListener(form.events.FORM_SUBMITTED,(e=>{e.preventDefault();const response=JSON.parse(e.detail);window.location.href=response.returnurl})),form.show()}}))}}));

//# sourceMappingURL=user_custom_form.min.js.map