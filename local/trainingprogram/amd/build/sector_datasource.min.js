define("local_trainingprogram/sector_datasource",["jquery","core/ajax","core/notification"],(function($,Ajax,Notification){return{processResults:function(selector,results){var options=[];return $.each(results.data,(function(index,response){options.push({value:response.id,label:response.title})})),options},transport:function(selector,query,callback){var el=$(selector),sectorid=0,allsegments=0,sectorlist=0,selected_sectorlist=0,type=el.data("type");switch(type){case"segment":if(void 0===(sectorid=el.attr("data-sectorid"))||"0"===sectorid||0===sectorid||""===sectorid)sectorlist=1==el.attr("data-single_sector")?$("select[name='sectors'] option:selected").map((function(){return this.value})).get().join(", "):$("select[name='sectors[]'] option:selected").map((function(){return this.value})).get().join(", ");break;case"jobfamily":sectorid=el.attr("data-segmentid"),console.log(sectorid),void 0===sectorid&&((selected_sectorlist=$("input[name='newjobfamilyoption']").attr("value"))||(selected_sectorlist=""),console.log(selected_sectorlist),0!=(sectorlist=$("select[name='sectors[]'] option:selected").map((function(){return this.value})).get().join(","))&&(allsegments=1));break;case"jobrole":sectorid=el.attr("data-jobfamilyid")}Ajax.call([{methodname:"local_trainingprogram_segmentlist",args:{query:query,type:type,selected_sectorlist:selected_sectorlist,sectorid:sectorid,sectorlist:sectorlist,allsegments:allsegments}}])[0].then(callback).catch(Notification.exception)}}}));

//# sourceMappingURL=sector_datasource.min.js.map