{"version":3,"file":"assigneditingtrainer.min.js","sources":["../src/assigneditingtrainer.js"],"sourcesContent":["\n/**\n * @module     local_trainingprogram\n * @copyright  Moodle India\n * @author \t   Ikram Ahmad (ikram.ahmad@moodle.com)\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\nimport Ajax from 'core/ajax';\nimport cfg from 'core/config';\nimport Notification from 'core/notification';\nimport Str from 'core/str';\nimport $ from 'jquery';\nconst Selectors = {\n    actions: {\n        addOrRemoveTrainer: '[role=\"option\"]',\n        save: '[data-action=\"save\"]',\n        checkbox: '[class=\"editing_trainer\"]',\n    },\n};\nexport const users = (e) => {\n\t// var  userid = $(\"#program_users option:selected\").last().val();\n\tvar dropdown = document.getElementById(\"program_users\");\n    var selectedValues = [];\n\tvar promise;\n  \tvar selectedTrainer;\n  \tvar is_already_added;\n    for (var i = 0; i < dropdown.options.length; i++) {\n\t    if (dropdown.options[i].selected) {\n\t    \tselectedTrainer = dropdown.options[i].value;\n\t    \t\n\t    \tis_already_added = document.querySelector('.assignedditingtrainer_'+selectedTrainer);\n\t    \tif (!is_already_added) {\n\t    \t\tpromise = Ajax.call([{\n\t\t\t\t\tmethodname: 'local_trainingprogram_edditingtrainer_confirmation',\n\t\t\t\t\targs: {trainer_id: selectedTrainer}\n\t\t\t\t}]);\n\t\t\t\tpromise[0].done(function(resp) {\n\t\t\t        $('.mform').append(resp.str);\n\t\t\t    }).fail(function(exception) {\n\t\t\t        console.log(exception);\n\t\t\t    });\n\t    \t}\n\t    }\n    }\n    document.addEventListener('click', function(e){\n\t  \tvar trainer_ids = [];\n    \tlet tagName = e.target.tagName;\n    \tlet is_removed = e.target.closest(Selectors.actions.addOrRemoveTrainer);\n    \tif (tagName == 'SPAN') {\n\t\t\tif (is_removed != null) {\n\t\t\t\tlet removed_trainer = is_removed.getAttribute('data-value');\n\t\t\t\t$('.assignedditingtrainer_'+removed_trainer).remove();\n\t\t\t}\n\t\t}\n\t\t// var edditing_trainer;\n    \tlet checkbox = document.querySelectorAll('.editing_trainer');\n    \tvar editingtrainer = document.querySelector('.editingtrainer');\n    \tif (checkbox) {\n    \t\t// $('.editingtrainer').val('');\n\t    \tfor (var i = 0; i < checkbox.length; i++) {\n    \t\t\ttrainer_ids.push(parseInt(checkbox[i].value));\n\t    \t\tif(!checkbox[i].checked){\n\t    \t\t\ttrainer_ids.pop(checkbox[i].value);\n\t                var ids = trainer_ids.join(',');\n\t    \t\t\teditingtrainer.value = ids;\n\t    \t\t}else{\n\t                var ids = trainer_ids.join(',');\n                    editingtrainer.value = ids;\n\t    \t\t}\n\t    \t}\n    \t}\n    });\n}\nexport const orgusers = (e) => {\n\tvar dropdown = document.getElementsByName(\"oguser\");\n\tvar selectedValues = [];\n\tvar promise;\n\tvar selectedTrainer;\n\tvar is_already_added;\n\tdropdown = dropdown[0];\n\tfor (var i = 0; i < dropdown.options.length; i++) {\n\t    if (dropdown.options[i].selected) {\n\t    \tselectedTrainer = dropdown.options[i].value;\n\t    \t\n\t    \tis_already_added = document.querySelector('.assignedditingtrainer_'+selectedTrainer);\n\t    \tif (!is_already_added) {\n\t    \t\tpromise = Ajax.call([{\n\t\t\t\t\tmethodname: 'local_trainingprogram_edditingtrainer_confirmation',\n\t\t\t\t\targs: {trainer_id: selectedTrainer}\n\t\t\t\t}]);\n\t\t\t\tpromise[0].done(function(resp) {\n\t\t\t        $('.mform').append(resp.str);\n\t\t\t    }).fail(function(exception) {\n\t\t\t        console.log(exception);\n\t\t\t    });\n\t    \t}\n\t    }\n    }\n    document.addEventListener('click', function(e){\n\t  \tvar trainer_ids = [];\n    \tlet tagName = e.target.tagName;\n    \tlet is_removed = e.target.closest(Selectors.actions.addOrRemoveTrainer);\n    \tif (tagName == 'SPAN') {\n\t\t\tif (is_removed != null) {\n\t\t\t\tlet removed_trainer = is_removed.getAttribute('data-value');\n\t\t\t\t$('.assignedditingtrainer_'+removed_trainer).remove();\n\t\t\t}\n\t\t}\n\t\t// var edditing_trainer;\n    \tlet checkbox = document.querySelectorAll('.editing_trainer');\n    \tvar editingtrainer = document.querySelector('.editingtrainer');\n    \tif (checkbox) {\n    \t\t// $('.editingtrainer').val('');\n\t    \tfor (var i = 0; i < checkbox.length; i++) {\n    \t\t\ttrainer_ids.push(parseInt(checkbox[i].value));\n\t    \t\tif(!checkbox[i].checked){\n\t    \t\t\ttrainer_ids.pop(checkbox[i].value);\n\t                var ids = trainer_ids.join(',');\n\t    \t\t\teditingtrainer.value = ids;\n\t    \t\t}else{\n\t                var ids = trainer_ids.join(',');\n                    editingtrainer.value = ids;\n\t    \t\t}\n\t    \t}\n    \t}\n    });\n}"],"names":["Selectors","addOrRemoveTrainer","save","checkbox","e","selectedTrainer","dropdown","document","getElementById","i","options","length","selected","value","querySelector","Ajax","call","methodname","args","trainer_id","done","resp","append","str","fail","exception","console","log","addEventListener","trainer_ids","tagName","target","is_removed","closest","removed_trainer","getAttribute","remove","querySelectorAll","editingtrainer","push","parseInt","checked","ids","join","pop","getElementsByName"],"mappings":";;;;;;mTAYMA,kBACO,CACLC,mBAAoB,kBACpBC,KAAM,uBACNC,SAAU,4CAGG,SAACC,WAKfC,gBAHFC,SAAWC,SAASC,eAAe,iBAK3BC,EAAI,EAAGA,EAAIH,SAASI,QAAQC,OAAQF,IACxCH,SAASI,QAAQD,GAAGG,WACvBP,gBAAkBC,SAASI,QAAQD,GAAGI,MAEnBN,SAASO,cAAc,0BAA0BT,kBAEzDU,cAAKC,KAAK,CAAC,CACvBC,WAAY,qDACZC,KAAM,CAACC,WAAYd,oBAEZ,GAAGe,MAAK,SAASC,0BAChB,UAAUC,OAAOD,KAAKE,QACzBC,MAAK,SAASC,WACbC,QAAQC,IAAIF,eAKnBlB,SAASqB,iBAAiB,SAAS,SAASxB,OACxCyB,YAAc,GACbC,QAAU1B,EAAE2B,OAAOD,QACnBE,WAAa5B,EAAE2B,OAAOE,QAAQjC,kBAAkBC,uBACrC,QAAX6B,SACY,MAAdE,WAAoB,KACnBE,gBAAkBF,WAAWG,aAAa,kCAC5C,0BAA0BD,iBAAiBE,aAIxCjC,SAAWI,SAAS8B,iBAAiB,oBACrCC,eAAiB/B,SAASO,cAAc,sBACxCX,aAEE,IAAIM,EAAI,EAAGA,EAAIN,SAASQ,OAAQF,OACpCoB,YAAYU,KAAKC,SAASrC,SAASM,GAAGI,QAClCV,SAASM,GAAGgC,QAIX,CACSC,IAAMb,YAAYc,KAAK,KACxBL,eAAezB,MAAQ6B,QANZ,CACvBb,YAAYe,IAAIzC,SAASM,GAAGI,WACf6B,IAAMb,YAAYc,KAAK,KACpCL,eAAezB,MAAQ6B,2BASP,SAACtC,OAIpBC,gBAHAC,SAAWC,SAASsC,kBAAkB,UAK1CvC,SAAWA,SAAS,OACf,IAAIG,EAAI,EAAGA,EAAIH,SAASI,QAAQC,OAAQF,IACrCH,SAASI,QAAQD,GAAGG,WACvBP,gBAAkBC,SAASI,QAAQD,GAAGI,MAEnBN,SAASO,cAAc,0BAA0BT,kBAEzDU,cAAKC,KAAK,CAAC,CACvBC,WAAY,qDACZC,KAAM,CAACC,WAAYd,oBAEZ,GAAGe,MAAK,SAASC,0BAChB,UAAUC,OAAOD,KAAKE,QACzBC,MAAK,SAASC,WACbC,QAAQC,IAAIF,eAKnBlB,SAASqB,iBAAiB,SAAS,SAASxB,OACxCyB,YAAc,GACbC,QAAU1B,EAAE2B,OAAOD,QACnBE,WAAa5B,EAAE2B,OAAOE,QAAQjC,kBAAkBC,uBACrC,QAAX6B,SACY,MAAdE,WAAoB,KACnBE,gBAAkBF,WAAWG,aAAa,kCAC5C,0BAA0BD,iBAAiBE,aAIxCjC,SAAWI,SAAS8B,iBAAiB,oBACrCC,eAAiB/B,SAASO,cAAc,sBACxCX,aAEE,IAAIM,EAAI,EAAGA,EAAIN,SAASQ,OAAQF,OACpCoB,YAAYU,KAAKC,SAASrC,SAASM,GAAGI,QAClCV,SAASM,GAAGgC,QAIX,CACSC,IAAMb,YAAYc,KAAK,KACxBL,eAAezB,MAAQ6B,QANZ,CACvBb,YAAYe,IAAIzC,SAASM,GAAGI,WACf6B,IAAMb,YAAYc,KAAK,KACpCL,eAAezB,MAAQ6B"}