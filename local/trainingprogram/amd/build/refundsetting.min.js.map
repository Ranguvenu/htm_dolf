{"version":3,"file":"refundsetting.min.js","sources":["../src/refundsetting.js"],"sourcesContent":["import TPDynamicForm from 'local_trainingprogram/dynamicform';\nimport ModalForm from 'core_form/modalform';\nimport ModalFactory from 'core/modal_factory';\nimport ModalEvents from 'core/modal_events';\nimport Ajax from 'core/ajax';\nimport {get_string as getString} from 'core/str';\nconst Selectors = {\n    actions: {\n        createrefundsetting: '[data-action=\"createrefundsetting\"]',\n        deleterefundsetting: '[data-action=\"deleterefundsetting\"]',\n    },\n};\nexport const init = () => {\n    document.addEventListener('click', function(e) {\n       // e.stopImmediatePropagation()\n        let element = e.target.closest(Selectors.actions.createrefundsetting);\n        if (element) {\n            e.preventDefault();\n            e.stopImmediatePropagation();\n            const title = element.getAttribute('data-id') ?\n                getString('editrefundsetting', 'local_trainingprogram') :\n                getString('createrefundsetting', 'local_trainingprogram');\n            const form = new TPDynamicForm({\n                formClass: 'local_trainingprogram\\\\form\\\\refundsettingsform',\n                args: {id: element.getAttribute('data-id')},\n                modalConfig: {title},\n                returnFocus: element,\n            });\n            form.addEventListener(form.events.FORM_SUBMITTED, () => window.location.reload());\n            form.show();\n        }\n        let deleterefundsetting = e.target.closest(Selectors.actions.deleterefundsetting);\n        if (deleterefundsetting) {\n             e.preventDefault();\n             const id = deleterefundsetting.getAttribute('data-id');\n            ModalFactory.create({\n                title: getString('deleteconfirm', 'local_trainingprogram'),\n                type: ModalFactory.types.SAVE_CANCEL,\n                body: getString('deleterefundsettingmessage', 'local_trainingprogram')\n            }).done(function(modal) {\n                this.modal = modal;\n                modal.setSaveButtonText(getString('deletetext', 'local_trainingprogram'));\n                modal.getRoot().on(ModalEvents.save, function(e) {\n                    e.preventDefault();\n                    var params = {};\n                    params.id = id;\n                    var promise = Ajax.call([{\n                        methodname: 'local_trainingprogram_deleterefundsetting',\n                        args: params\n                    }]);\n                    promise[0].done(function(resp) {\n                        window.location.reload(true);\n                    }).fail(function() {\n                        console.log('exception');\n                    });\n                }.bind(this));\n                modal.show();\n            }.bind(this));\n        }\n    });\n};\n"],"names":["Selectors","createrefundsetting","deleterefundsetting","document","addEventListener","e","element","target","closest","preventDefault","stopImmediatePropagation","title","getAttribute","form","TPDynamicForm","formClass","args","id","modalConfig","returnFocus","events","FORM_SUBMITTED","window","location","reload","show","create","type","ModalFactory","types","SAVE_CANCEL","body","done","modal","setSaveButtonText","getRoot","on","ModalEvents","save","params","Ajax","call","methodname","resp","fail","console","log","bind","this"],"mappings":"wpBAMMA,kBACO,CACLC,oBAAqB,sCACrBC,oBAAqB,qDAGT,WAChBC,SAASC,iBAAiB,SAAS,SAASC,OAEpCC,QAAUD,EAAEE,OAAOC,QAAQR,kBAAkBC,wBAC7CK,QAAS,CACTD,EAAEI,iBACFJ,EAAEK,+BACIC,MAAQL,QAAQM,aAAa,YAC/B,mBAAU,oBAAqB,0BAC/B,mBAAU,sBAAuB,yBAC/BC,KAAO,IAAIC,qBAAc,CAC3BC,UAAW,kDACXC,KAAM,CAACC,GAAIX,QAAQM,aAAa,YAChCM,YAAa,CAACP,MAAAA,OACdQ,YAAab,UAEjBO,KAAKT,iBAAiBS,KAAKO,OAAOC,gBAAgB,kBAAMC,OAAOC,SAASC,YACxEX,KAAKY,WAELvB,oBAAsBG,EAAEE,OAAOC,QAAQR,kBAAkBE,wBACzDA,oBAAqB,CACpBG,EAAEI,qBACIQ,GAAKf,oBAAoBU,aAAa,kCAChCc,OAAO,CAChBf,OAAO,mBAAU,gBAAiB,yBAClCgB,KAAMC,uBAAaC,MAAMC,YACzBC,MAAM,mBAAU,6BAA8B,2BAC/CC,KAAK,SAASC,YACRA,MAAQA,MACbA,MAAMC,mBAAkB,mBAAU,aAAc,0BAChDD,MAAME,UAAUC,GAAGC,sBAAYC,KAAM,SAASjC,GAC1CA,EAAEI,qBACE8B,OAAS,GACbA,OAAOtB,GAAKA,GACEuB,cAAKC,KAAK,CAAC,CACrBC,WAAY,4CACZ1B,KAAMuB,UAEF,GAAGP,MAAK,SAASW,MACrBrB,OAAOC,SAASC,QAAO,MACxBoB,MAAK,WACJC,QAAQC,IAAI,iBAElBC,KAAKC,OACPf,MAAMR,QACRsB,KAAKC"}