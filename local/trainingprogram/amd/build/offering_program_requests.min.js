define("local_trainingprogram/offering_program_requests",["exports","core/modal_factory","core/modal_events","theme_academy/homepage","core/ajax","core/templates","core/str"],(function(_exports,_modal_factory,_modal_events,_homepage,_ajax,_templates,_str){function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}
/**
   * TODO describe module offering_program_requests
   *
   * @module     local_trainingprogram/offering_program_requests
   * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
   */Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.init=void 0,_modal_factory=_interopRequireDefault(_modal_factory),_modal_events=_interopRequireDefault(_modal_events),_homepage=_interopRequireDefault(_homepage),_ajax=_interopRequireDefault(_ajax),_templates=_interopRequireDefault(_templates);var Selectors_actions={add_update_delete_entity:'[data-action="add_update_delete_entity"]',viewcurrentoffering:'[data-action="viewcurrentoffering"]'},HomePage=new _homepage.default;_exports.init=function(){document.addEventListener("click",(function(e){var add_update_delete_entity=e.target.closest(Selectors_actions.add_update_delete_entity);if(add_update_delete_entity){e.preventDefault(),e.stopImmediatePropagation();var rootid=add_update_delete_entity.getAttribute("data-rootid"),entityid=add_update_delete_entity.getAttribute("data-entityid"),entitycode=add_update_delete_entity.getAttribute("data-code"),etype=add_update_delete_entity.getAttribute("data-entitytype"),requesttype=add_update_delete_entity.getAttribute("data-requesttype"),requestby=add_update_delete_entity.getAttribute("data-requestby"),requestbyname=add_update_delete_entity.getAttribute("data-requestbyname"),actiontype=add_update_delete_entity.getAttribute("data-actiontype"),displayparams={};if(displayparams.entitycode=entitycode,displayparams.requestbyname=requestbyname,"Create"==requesttype)var headermessage=(0,_str.get_string)("createofferingconfirm","local_trainingprogram"),bodymessage=(0,_str.get_string)("createofferingconfirmmessage","local_trainingprogram",displayparams);else if("update"==requesttype)headermessage=(0,_str.get_string)("updateofferingconfirm","local_trainingprogram"),bodymessage=(0,_str.get_string)("updateofferingconfirmmessage","local_trainingprogram",displayparams);else if("Offering"==etype)headermessage=(0,_str.get_string)("deleteofferingconfirm","local_trainingprogram"),bodymessage=(0,_str.get_string)("deleteofferingconfirmmessage","local_trainingprogram",displayparams);else headermessage=(0,_str.get_string)("deleteprogramconfirm","local_trainingprogram"),bodymessage=(0,_str.get_string)("deleteprogramconfirmmessage","local_trainingprogram",displayparams);_modal_factory.default.create({title:headermessage,type:_modal_factory.default.types.SAVE_CANCEL,body:bodymessage}).done(function(modal){this.modal=modal,modal.setSaveButtonText((0,_str.get_string)("yes","local_trainingprogram")),modal.getRoot().on(_modal_events.default.save,function(e){e.preventDefault(),_templates.default.renderForPromise("tool_product/loader",{}).then((function(_ref){var html=_ref.html,js=_ref.js;_templates.default.appendNodeContents(".modal-content",html,js)}));var params={};params.rootid=rootid,params.entityid=entityid,params.entitycode=entitycode,params.etype=etype,params.requestby=requestby,params.requesttype=requesttype,params.actiontype=actiontype,_ajax.default.call([{methodname:"local_trainingprogram_offering_program_action",args:params}])[0].done((function(resp){"success"==resp.response?window.location.href=resp.returnurl:(modal.hide(),HomePage.confirmbox(resp.response))})).fail((function(err){HomePage.confirmbox(err.message)}))}.bind(this)),modal.show()}.bind(this))}var viewcurrentoffering=e.target.closest(Selectors_actions.viewcurrentoffering);if(viewcurrentoffering){var _rootid=viewcurrentoffering.getAttribute("data-rootid"),offeringid=viewcurrentoffering.getAttribute("data-offeringid"),_requesttype=viewcurrentoffering.getAttribute("data-requesttype"),params={};params.rootid=_rootid,params.offeringid=offeringid,params.requesttype=_requesttype,_ajax.default.call([{methodname:"local_trainingprogram_viewcurrentoffering",args:params}])[0].done((function(resp){_modal_factory.default.create({title:(0,_str.get_string)("view_offering","local_trainingprogram"),type:_modal_factory.default.types.DEFAULT,body:resp.options}).done(function(modal){this.modal=modal,this.modal.setLarge(),modal.show()}.bind(this))})).fail((function(){console.log("exception")}))}}))}}));

//# sourceMappingURL=offering_program_requests.min.js.map