define("local_competency/competencyform",["exports","local_trainingprogram/dynamicform","core/modal_factory","core/modal_events","core/templates","core/ajax","core/str","jquery"],(function(_exports,_dynamicform,_modal_factory,_modal_events,_templates,_ajax,_str,_jquery){function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}
/**
   *
   * @module     local_competency/competency
   * @copyright  2022 e abyas  <info@eabyas.com>
   * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
   */Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.init=void 0,_dynamicform=_interopRequireDefault(_dynamicform),_modal_factory=_interopRequireDefault(_modal_factory),_modal_events=_interopRequireDefault(_modal_events),_templates=_interopRequireDefault(_templates),_ajax=_interopRequireDefault(_ajax),_jquery=_interopRequireDefault(_jquery);const Selectors_actions={editCompetency:'[data-action="editcompetency"]',editcompetencyPerformance:'[data-action="editcompetencyperformance"]',editcompetencyObjective:'[data-action="editcompetencyobjective"]',viewcompetencyLearningcontent:'[data-action="viewcompetencylearningcontent"]',viewquestionCompetencies:'[data-action="viewquestioncompetencies"]',editlevelDescription:'[data-action="editleveldescription"]'};_exports.init=()=>{document.addEventListener("click",(function(e){let element=e.target.closest(Selectors_actions.editCompetency);if(element){e.preventDefault();const title=element.getAttribute("data-id")?(0,_str.get_string)("editcompetency","local_competency",element.getAttribute("data-name")):(0,_str.get_string)("createcompetency","local_competency"),form=new _dynamicform.default({formClass:"local_competency\\form\\competency_form",args:{id:element.getAttribute("data-id")},modalConfig:{title:title},returnFocus:element});form.addEventListener(form.events.FORM_SUBMITTED,(()=>window.location.reload())),form.show()}let competencyelement=e.target.closest(Selectors_actions.editcompetencyPerformance);if(competencyelement){e.preventDefault();const title=competencyelement.getAttribute("data-name"),form=new _dynamicform.default({formClass:"local_competency\\form\\competencyperformance_form",args:{competency:competencyelement.getAttribute("data-competencyid"),id:competencyelement.getAttribute("data-id")},modalConfig:{title:title},returnFocus:competencyelement});form.addEventListener(form.events.FORM_SUBMITTED,(()=>window.location.reload())),form.show()}let competencyobjelement=e.target.closest(Selectors_actions.editcompetencyObjective);if(competencyobjelement){e.preventDefault();const title=competencyobjelement.getAttribute("data-name"),form=new _dynamicform.default({formClass:"local_competency\\form\\competencyobjective_form",args:{competency:competencyobjelement.getAttribute("data-competencyid"),competencypc:competencyobjelement.getAttribute("data-id")},modalConfig:{title:title},returnFocus:competencyobjelement});form.addEventListener(form.events.FORM_SUBMITTED,(()=>window.location.reload())),form.show()}let learningcontent=e.target.closest(Selectors_actions.viewcompetencyLearningcontent);if(learningcontent){var modalPromise=_modal_factory.default.create({type:_modal_factory.default.types.DEFAULT}),stringsPromise=(0,_str.get_strings)([{key:"learningcontenttrainingprogram",component:"local_competency"},{key:"learningcontentexam",component:"local_competency"},{key:"viewlearningcontent",component:"local_competency",param:learningcontent.getAttribute("data-name")},{key:"learningcontentquestion",component:"local_competency"},{key:"learningcontentlevels",component:"local_competency"}]);_jquery.default.when(stringsPromise,modalPromise).then(function(strings,modal){var tabone={active:"active",type:"exams",name:strings[1]},tabtwo={active:"",type:"trainingprograms",name:strings[0]},options={};if(options.competencyid=learningcontent.getAttribute("data-id"),options.tabs=[tabone,tabtwo],options.contenttype=learningcontent.getAttribute("data-contenttype"),"competencypc"==options.contenttype){var tabthree={active:"",type:"questions",name:strings[3]};options.tabs=[tabone,tabtwo,tabthree]}this.modal=modal,this.modal.setTitle(strings[2]),this.modal.setBody(_templates.default.render("local_competency/learningcontent_display",options)),this.modal.getRoot().on(_modal_events.default.hidden,function(){this.modal.destroy()}.bind(this)),this.modal.setLarge(),this.modal.show()}.bind(this))}let questioncompetencies=e.target.closest(Selectors_actions.viewquestionCompetencies);if(questioncompetencies){e.preventDefault(),e.stopImmediatePropagation();modalPromise=_modal_factory.default.create({type:_modal_factory.default.types.DEFAULT}),stringsPromise=(0,_str.get_strings)([{key:"viewquestioncompetencies",component:"local_competency",param:questioncompetencies.getAttribute("data-name")}]);_jquery.default.when(stringsPromise,modalPromise).then(function(strings,modal){var options={};options.questionid=questioncompetencies.getAttribute("data-id"),this.modal=modal,this.modal.setTitle(strings[0]),this.modal.setBody(_templates.default.render("local_competency/questioncompetencies_display",options)),this.modal.getRoot().on(_modal_events.default.hidden,function(){this.modal.destroy()}.bind(this)),this.modal.getRoot().addClass("questioncmtncTransition"),this.modal.setLarge(),this.modal.show()}.bind(this))}let levelelement=e.target.closest(Selectors_actions.editlevelDescription);if(levelelement){e.preventDefault();const title=levelelement.getAttribute("data-levelid")?(0,_str.get_string)("editleveldescription","local_competency",levelelement.getAttribute("data-name")):(0,_str.get_string)("addleveldescription","local_competency"),form=new _dynamicform.default({formClass:"local_competency\\form\\competencylevel_form",args:{competencyid:levelelement.getAttribute("data-competencyid"),levelid:levelelement.getAttribute("data-levelid")},modalConfig:{title:title},returnFocus:levelelement});form.addEventListener(form.events.FORM_SUBMITTED,(()=>window.location.reload())),form.show()}}))}}));

//# sourceMappingURL=competencyform.min.js.map