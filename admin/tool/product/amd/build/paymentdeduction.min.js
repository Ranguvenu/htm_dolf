define("tool_product/paymentdeduction",["exports","core_form/modalform","core/modal_factory","core/modal_events","theme_academy/homepage","jquery","core/str","core/ajax","core/templates"],(function(_exports,_modalform,_modal_factory,_modal_events,_homepage,_jquery,_str,_ajax,_templates){function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.init=void 0,_modalform=_interopRequireDefault(_modalform),_modal_factory=_interopRequireDefault(_modal_factory),_modal_events=_interopRequireDefault(_modal_events),_homepage=_interopRequireDefault(_homepage),_jquery=_interopRequireDefault(_jquery),_ajax=_interopRequireDefault(_ajax),_templates=_interopRequireDefault(_templates);const Selectors_actions={deducttraineeamount:'[data-action="deduct-traineeamount"]'};let HomePage=new _homepage.default;_exports.init=()=>{document.addEventListener("click",(function(e){let deducttraineeamount=e.target.closest(Selectors_actions.deducttraineeamount);if(deducttraineeamount){e.stopImmediatePropagation();const walletid=deducttraineeamount.getAttribute("data-walletid"),walletamount=deducttraineeamount.getAttribute("data-walletamount");var options={};options.walletid=walletid,options.walletamount=walletamount;(0,_jquery.default)(Selectors_actions.deducttraineeamount);_modal_factory.default.create({title:(0,_str.get_string)("paymentdeduction","tool_product"),type:_modal_factory.default.types.SAVE_CANCEL,body:_templates.default.render("tool_product/deductionsettings",options).done((function(html,js){_templates.default.replaceNodeContents("deductionsettings",html,js)}))}).done(function(modal){this.modal=modal,modal.setSaveButtonText((0,_str.get_string)("deduct","tool_product")),modal.getRoot().on(_modal_events.default.save,function(e){e.preventDefault();var params={};if(params.walletid=walletid,params.walletamount=walletamount,params.deductedamount=(0,_jquery.default)("#deductedamount").val(),params.deductedamount<0)HomePage.confirmbox((0,_str.get_string)("deductamountisnegative","tool_product"));else if(+params.deductedamount>+params.walletamount)HomePage.confirmbox((0,_str.get_string)("deductamountismore","tool_product"));else if(isNaN(params.deductedamount))HomePage.confirmbox((0,_str.get_string)("deductcannotbenull","tool_product"));else{_ajax.default.call([{methodname:"tool_product_trainee_walletamount",args:params}])[0].done((function(resp){window.location=M.cfg.wwwroot+"/admin/tool/product/financialpayments.php?mode=3"})).fail((function(){console.log("exception")}))}}.bind(this)),modal.show()}.bind(this))}}))}}));

//# sourceMappingURL=paymentdeduction.min.js.map