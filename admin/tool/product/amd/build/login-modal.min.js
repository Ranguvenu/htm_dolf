define("tool_product/login-modal",["jquery","core/notification","core/ajax","core/custom_interaction_events","core/modal","core/modal_registry","theme_academy/homepage"],(function($,Notification,Ajax,CustomEvents,Modal,ModalRegistry,HomePageJs){var registered=!1,SELECTORS_LOGIN_BUTTON='[data-action="login"]',ModalLogin=function(root){Modal.call(this,root),this.getFooter().find(SELECTORS_LOGIN_BUTTON).length||Notification.exception({message:"No login button found"})};return ModalLogin.TYPE="tool_product-login",(ModalLogin.prototype=Object.create(Modal.prototype)).constructor=ModalLogin,ModalLogin.prototype.registerEventListeners=function(){Modal.prototype.registerEventListeners.call(this),this.getModal().on(CustomEvents.events.activate,SELECTORS_LOGIN_BUTTON,function(e,data){$("[data-loader=login]").removeClass("d-none"),Ajax.call([{methodname:"tool_product_user_login",args:{username:$("#username").val(),password:$("#inputPassword").val()}}])[0].done((function(response){let homepage=new HomePageJs;response.success?(console.log(window.location.pathname),"/local/exams/exams_qualification_details.php"==window.location.pathname||"/local/trainingprogram/programcourseoverview.php"==window.location.pathname?location.replace(window.location.href):location.replace($("#redirecturi").val())):($("[data-loader=login]").addClass("d-none"),homepage.confirmbox(response.error))})).fail((function(error){(new HomePageJs).confirmbox(error.message)}))}.bind(this))},registered||(ModalRegistry.register(ModalLogin.TYPE,ModalLogin,"tool_product/login-modal"),registered=!0),ModalLogin}));

//# sourceMappingURL=login-modal.min.js.map